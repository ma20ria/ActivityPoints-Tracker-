"use strict";(self.webpackChunkactivity_points_tracker=self.webpackChunkactivity_points_tracker||[]).push([[793],{8489:($,y,s)=>{s.d(y,{T:()=>T});var d=s(1626),u=s(8810),t=s(3888),L=s(8211),A=s(9974),m=s(8750),f=s(1853),b=s(4360),_=s(5225);const w=(0,f.L)(c=>function(n=null){c(this),this.message="Timeout has occurred",this.name="TimeoutError",this.info=n});function r(c){throw new w(c)}var e=s(3669),i=s(1807),l=s(9437),U=s(4438);let T=(()=>{class c{constructor(n){this.http=n,this.apiUrl="http://localhost:5000/api/activities"}submitActivity(n){const o=localStorage.getItem("token");if(!o)return(0,u.$)(()=>new Error("Authentication token not found"));const E=new d.Lr({Authorization:`Bearer ${o}`});return console.log("Submitting activity with URL:",this.apiUrl),console.log("Headers:",E),console.log("FormData contents:"),n.forEach((h,k)=>{console.log(k,":",h)}),this.http.post(this.apiUrl,n,{headers:E,reportProgress:!0}).pipe(function v(c,I){const{first:n,each:o,with:E=r,scheduler:h=I??t.E,meta:k=null}=(0,L.v)(c)?{first:c}:"number"==typeof c?{each:c}:c;if(null==n&&null==o)throw new TypeError("No timeout provided.");return(0,A.N)((M,p)=>{let P,g,x=null,F=0;const C=D=>{g=(0,_.N)(p,h,()=>{try{P.unsubscribe(),(0,m.Tg)(E({meta:k,lastValue:x,seen:F})).subscribe(p)}catch(O){p.error(O)}},D)};P=M.subscribe((0,b._)(p,D=>{g?.unsubscribe(),F++,p.next(x=D),o>0&&C(o)},void 0,void 0,()=>{g?.closed||g?.unsubscribe(),x=null})),!F&&C(null!=n?"number"==typeof n?n:+n-h.now():o)})}(6e4),function a(c=1/0){let I;I=c&&"object"==typeof c?c:{count:c};const{count:n=1/0,delay:o,resetOnSuccess:E=!1}=I;return n<=0?e.D:(0,A.N)((h,k)=>{let p,M=0;const P=()=>{let g=!1;p=h.subscribe((0,b._)(k,x=>{E&&(M=0),k.next(x)},void 0,x=>{if(M++<n){const F=()=>{p?(p.unsubscribe(),p=null,P()):g=!0};if(null!=o){const C="number"==typeof o?(0,i.O)(o):(0,m.Tg)(o(x,M)),D=(0,b._)(k,()=>{D.unsubscribe(),F()},()=>{k.complete()});C.subscribe(D)}else F()}else k.error(x)})),g&&(p.unsubscribe(),p=null,P())};P()})}(1),(0,l.W)(this.handleError))}getMyActivities(){const n=localStorage.getItem("token");if(!n)return(0,u.$)(()=>new Error("Authentication token not found"));const o=new d.Lr({Authorization:`Bearer ${n}`});return this.http.get(this.apiUrl,{headers:o}).pipe((0,l.W)(this.handleError))}getPendingActivities(){const n=localStorage.getItem("token");if(!n)return(0,u.$)(()=>new Error("Authentication token not found"));const o=new d.Lr({Authorization:`Bearer ${n}`});return this.http.get(`${this.apiUrl}/pending`,{headers:o}).pipe((0,l.W)(this.handleError))}reviewActivity(n,o){const E=localStorage.getItem("token");if(!E)return(0,u.$)(()=>new Error("Authentication token not found"));const h=new d.Lr({Authorization:`Bearer ${E}`});return this.http.put(`${this.apiUrl}/${n}/review`,o,{headers:h}).pipe((0,l.W)(this.handleError))}getAllActivities(){const n=localStorage.getItem("token");if(!n)return(0,u.$)(()=>new Error("Authentication token not found"));const o=new d.Lr({Authorization:`Bearer ${n}`});return this.http.get(`${this.apiUrl}/all`,{headers:o}).pipe((0,l.W)(this.handleError))}generateReport(n={}){const o=localStorage.getItem("token");if(!o)return(0,u.$)(()=>new Error("Authentication token not found"));const E=new d.Lr({Authorization:`Bearer ${o}`}),h=new URLSearchParams;n.teacherId&&h.append("teacherId",n.teacherId),n.studentIds&&h.append("studentIds",n.studentIds),n.department&&h.append("department",n.department),n.class&&h.append("class",n.class),n.semester&&h.append("semester",n.semester),n.status&&h.append("status",n.status);const k=`${this.apiUrl}/report?${h.toString()}`;return this.http.get(k,{headers:E})}handleError(n){console.error("API Error:",n);let o="An unknown error occurred";return o=n.error instanceof ErrorEvent?`Error: ${n.error.message}`:n.error&&n.error.message?n.error.message:0===n.status?"Unable to connect to the server. Please check your internet connection.":401===n.status?"Unauthorized. Please log in again.":403===n.status?"You do not have permission to perform this action.":`Error Code: ${n.status}, Message: ${n.message}`,console.error("Formatted error message:",o),(0,u.$)(()=>new Error(o))}static{this.\u0275fac=function(o){return new(o||c)(U.KVO(d.Qq))}}static{this.\u0275prov=U.jDH({token:c,factory:c.\u0275fac,providedIn:"root"})}}return c})()},1529:($,y,s)=>{s.d(y,{_:()=>r});var d=s(2183),u=s(177),t=s(4438),L=s(8010);const A=e=>["/dashboard",e];function m(e,i){1&e&&(t.qex(0),t.j41(1,"li",8)(2,"a",9),t.EFF(3,"Login"),t.k0s()(),t.j41(4,"li",8)(5,"a",10),t.EFF(6,"Sign Up"),t.k0s()(),t.bVm())}function f(e,i){1&e&&(t.qex(0),t.j41(1,"li",8)(2,"a",14),t.EFF(3,"My Activities"),t.k0s()(),t.j41(4,"li",8)(5,"a",15),t.EFF(6,"Submit Activity"),t.k0s()(),t.bVm())}function b(e,i){1&e&&(t.j41(0,"li",8)(1,"a",17),t.EFF(2,"Review Activities"),t.k0s()())}function _(e,i){if(1&e&&(t.qex(0),t.DNE(1,b,3,0,"li",16),t.bVm()),2&e){const a=t.XpG(2);t.R7$(),t.Y8G("ngIf","superadmin"===a.currentUser.role)}}function w(e,i){1&e&&(t.qex(0),t.j41(1,"li",18)(2,"a",19),t.EFF(3," Admin "),t.k0s(),t.j41(4,"ul",20)(5,"li")(6,"a",21),t.EFF(7,"Manage Users"),t.k0s()(),t.j41(8,"li")(9,"a",22),t.EFF(10,"Settings"),t.k0s()()()(),t.bVm())}function v(e,i){if(1&e){const a=t.RV6();t.qex(0),t.j41(1,"li",8)(2,"a",11),t.EFF(3,"Dashboard"),t.k0s()(),t.j41(4,"li",8)(5,"a",12),t.EFF(6,"Profile"),t.k0s()(),t.DNE(7,f,7,0,"ng-container",7)(8,_,2,1,"ng-container",7)(9,w,11,0,"ng-container",7),t.j41(10,"li",8)(11,"a",13),t.bIt("click",function(){t.eBV(a);const U=t.XpG();return t.Njj(U.logout())}),t.EFF(12,"Logout"),t.k0s()(),t.bVm()}if(2&e){const a=t.XpG();t.R7$(2),t.Y8G("routerLink",t.eq3(4,A,a.currentUser.role)),t.R7$(5),t.Y8G("ngIf","student"===a.currentUser.role),t.R7$(),t.Y8G("ngIf","teacher"===a.currentUser.role||"superadmin"===a.currentUser.role),t.R7$(),t.Y8G("ngIf","superadmin"===a.currentUser.role)}}let r=(()=>{class e{constructor(a){this.authService=a,this.currentUser=null,this.authService.currentUser$.subscribe(l=>{this.currentUser=l})}logout(){this.authService.logout()}static{this.\u0275fac=function(l){return new(l||e)(t.rXU(L.u))}}static{this.\u0275cmp=t.VBU({type:e,selectors:[["app-navbar"]],standalone:!0,features:[t.aNF],decls:10,vars:2,consts:[[1,"navbar","navbar-expand-lg","navbar-dark","bg-primary"],[1,"container"],["routerLink","/",1,"navbar-brand"],["type","button","data-bs-toggle","collapse","data-bs-target","#navbarNav","aria-controls","navbarNav","aria-expanded","false","aria-label","Toggle navigation",1,"navbar-toggler"],[1,"navbar-toggler-icon"],["id","navbarNav",1,"collapse","navbar-collapse"],[1,"navbar-nav","ms-auto"],[4,"ngIf"],[1,"nav-item"],["routerLink","/auth/login","routerLinkActive","active",1,"nav-link"],["routerLink","/auth/signup","routerLinkActive","active",1,"nav-link"],["routerLinkActive","active",1,"nav-link",3,"routerLink"],["routerLink","/profile","routerLinkActive","active",1,"nav-link"],["href","javascript:void(0)",1,"nav-link",3,"click"],["routerLink","/activities","routerLinkActive","active",1,"nav-link"],["routerLink","/activities/submit","routerLinkActive","active",1,"nav-link"],["class","nav-item",4,"ngIf"],["routerLink","/review","routerLinkActive","active",1,"nav-link"],[1,"nav-item","dropdown"],["href","#","id","adminDropdown","role","button","data-bs-toggle","dropdown","aria-expanded","false",1,"nav-link","dropdown-toggle"],["aria-labelledby","adminDropdown",1,"dropdown-menu"],["routerLink","/admin/users",1,"dropdown-item"],["routerLink","/admin/settings",1,"dropdown-item"]],template:function(l,U){1&l&&(t.j41(0,"nav",0)(1,"div",1)(2,"a",2),t.EFF(3,"Activity Points Tracker"),t.k0s(),t.j41(4,"button",3),t.nrm(5,"span",4),t.k0s(),t.j41(6,"div",5)(7,"ul",6),t.DNE(8,m,7,0,"ng-container",7)(9,v,13,6,"ng-container",7),t.k0s()()()()),2&l&&(t.R7$(8),t.Y8G("ngIf",!U.currentUser),t.R7$(),t.Y8G("ngIf",U.currentUser))},dependencies:[d.Wk,d.wQ,u.MD,u.bT],styles:[".navbar[_ngcontent-%COMP%]{box-shadow:0 2px 4px #0000001a;margin-bottom:1rem}.navbar-brand[_ngcontent-%COMP%]{font-weight:700;font-size:1.4rem}.nav-link[_ngcontent-%COMP%]{font-weight:500;padding:.5rem 1rem;transition:all .2s ease}.nav-link[_ngcontent-%COMP%]:hover{background-color:#ffffff1a;border-radius:4px}.nav-link.active[_ngcontent-%COMP%]{background-color:#fff3;border-radius:4px}.dropdown-menu[_ngcontent-%COMP%]{border:none;box-shadow:0 4px 6px #0000001a;border-radius:4px}.dropdown-item[_ngcontent-%COMP%]{padding:.5rem 1rem;font-weight:500}.dropdown-item[_ngcontent-%COMP%]:hover{background-color:#f8f9fa}.dropdown-item[_ngcontent-%COMP%]:active{background-color:#e9ecef}"]})}}return e})()},1807:($,y,s)=>{s.d(y,{O:()=>A});var d=s(1985),u=s(3888),t=s(9470),L=s(8211);function A(m=0,f,b=u.b){let _=-1;return null!=f&&((0,t.m)(f)?b=f:_=f),new d.c(w=>{let v=(0,L.v)(m)?+m-b.now():m;v<0&&(v=0);let r=0;return b.schedule(function(){w.closed||(w.next(r++),0<=_?this.schedule(void 0,_):w.complete())},v)})}},3888:($,y,s)=>{s.d(y,{b:()=>w,E:()=>_});var d=s(8359);class u extends d.yU{constructor(r,e){super()}schedule(r,e=0){return this}}const t={setInterval(v,r,...e){const{delegate:i}=t;return i?.setInterval?i.setInterval(v,r,...e):setInterval(v,r,...e)},clearInterval(v){const{delegate:r}=t;return(r?.clearInterval||clearInterval)(v)},delegate:void 0};var L=s(7908);const m={now:()=>(m.delegate||Date).now(),delegate:void 0};class f{constructor(r,e=f.now){this.schedulerActionCtor=r,this.now=e}schedule(r,e=0,i){return new this.schedulerActionCtor(this,r).schedule(i,e)}}f.now=m.now;const _=new class b extends f{constructor(r,e=f.now){super(r,e),this.actions=[],this._active=!1}flush(r){const{actions:e}=this;if(this._active)return void e.push(r);let i;this._active=!0;do{if(i=r.execute(r.state,r.delay))break}while(r=e.shift());if(this._active=!1,i){for(;r=e.shift();)r.unsubscribe();throw i}}}(class A extends u{constructor(r,e){super(r,e),this.scheduler=r,this.work=e,this.pending=!1}schedule(r,e=0){var i;if(this.closed)return this;this.state=r;const a=this.id,l=this.scheduler;return null!=a&&(this.id=this.recycleAsyncId(l,a,e)),this.pending=!0,this.delay=e,this.id=null!==(i=this.id)&&void 0!==i?i:this.requestAsyncId(l,this.id,e),this}requestAsyncId(r,e,i=0){return t.setInterval(r.flush.bind(r,this),i)}recycleAsyncId(r,e,i=0){if(null!=i&&this.delay===i&&!1===this.pending)return e;null!=e&&t.clearInterval(e)}execute(r,e){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;const i=this._execute(r,e);if(i)return i;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(r,e){let a,i=!1;try{this.work(r)}catch(l){i=!0,a=l||new Error("Scheduled action threw falsy error")}if(i)return this.unsubscribe(),a}unsubscribe(){if(!this.closed){const{id:r,scheduler:e}=this,{actions:i}=e;this.work=this.state=this.scheduler=null,this.pending=!1,(0,L.o)(i,this),null!=r&&(this.id=this.recycleAsyncId(e,r,null)),this.delay=null,super.unsubscribe()}}}),w=_},8211:($,y,s)=>{function d(u){return u instanceof Date&&!isNaN(u)}s.d(y,{v:()=>d})}}]);