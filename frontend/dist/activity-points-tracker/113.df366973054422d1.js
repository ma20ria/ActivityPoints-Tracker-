"use strict";(self.webpackChunkactivity_points_tracker=self.webpackChunkactivity_points_tracker||[]).push([[113],{6113:(I,p,i)=>{i.r(p),i.d(p,{ResetPasswordComponent:()=>O});var u=i(177),n=i(4341),g=i(2183),s=i(4438),f=i(8010);const _=e=>({"is-invalid":e});function w(e,a){if(1&e&&(s.j41(0,"div",23),s.EFF(1),s.k0s()),2&e){const t=s.XpG();s.R7$(),s.JRh(t.successMessage)}}function P(e,a){if(1&e&&(s.j41(0,"div",24),s.EFF(1),s.k0s()),2&e){const t=s.XpG();s.R7$(),s.JRh(t.errorMessage)}}function h(e,a){1&e&&(s.j41(0,"div"),s.EFF(1,"Password is required"),s.k0s())}function v(e,a){1&e&&(s.j41(0,"div"),s.EFF(1,"Password must be at least 6 characters"),s.k0s())}function b(e,a){if(1&e&&(s.j41(0,"div",25),s.DNE(1,h,2,0,"div",20)(2,v,2,0,"div",20),s.k0s()),2&e){let t,o;const r=s.XpG();s.R7$(),s.Y8G("ngIf",null==(t=r.resetPasswordForm.get("password"))||null==t.errors?null:t.errors.required),s.R7$(),s.Y8G("ngIf",null==(o=r.resetPasswordForm.get("password"))||null==o.errors?null:o.errors.minlength)}}function C(e,a){1&e&&(s.j41(0,"div"),s.EFF(1,"Confirm password is required"),s.k0s())}function F(e,a){1&e&&(s.j41(0,"div"),s.EFF(1,"Passwords do not match"),s.k0s())}function M(e,a){if(1&e&&(s.j41(0,"div",25),s.DNE(1,C,2,0,"div",20)(2,F,2,0,"div",20),s.k0s()),2&e){let t;const o=s.XpG();s.R7$(),s.Y8G("ngIf",null==(t=o.resetPasswordForm.get("confirmPassword"))||null==t.errors?null:t.errors.required),s.R7$(),s.Y8G("ngIf",null==o.resetPasswordForm.errors?null:o.resetPasswordForm.errors.mismatch)}}function R(e,a){1&e&&s.nrm(0,"span",26)}function k(e,a){1&e&&(s.j41(0,"span"),s.EFF(1,"Processing..."),s.k0s())}function E(e,a){1&e&&(s.j41(0,"span"),s.EFF(1,"Reset Password"),s.k0s())}let O=(()=>{class e{constructor(t,o,r,d){this.fb=t,this.authService=o,this.router=r,this.route=d,this.isLoading=!1,this.errorMessage="",this.successMessage="",this.resetToken="",this.resetPasswordForm=this.fb.group({password:["",[n.k0.required,n.k0.minLength(6)]],confirmPassword:["",n.k0.required]},{validator:this.passwordMatchValidator})}ngOnInit(){this.resetToken=this.route.snapshot.params.token,this.resetToken||(this.errorMessage="Invalid reset token. Please try the password reset process again.")}passwordMatchValidator(t){const o=t.get("password")?.value,r=t.get("confirmPassword")?.value;return o===r?null:{mismatch:!0}}onSubmit(){if(this.resetPasswordForm.invalid)return;this.isLoading=!0,this.errorMessage="",this.successMessage="";const{password:t}=this.resetPasswordForm.value;this.authService.resetPassword(this.resetToken,t).subscribe({next:o=>{this.isLoading=!1,this.successMessage="Password has been reset successfully. You will be redirected to login.",localStorage.setItem("token",o.token),localStorage.setItem("user",JSON.stringify(o.user)),setTimeout(()=>{this.router.navigate(["/login"])},2e3)},error:o=>{this.isLoading=!1,this.errorMessage=o.error?.message||"Failed to reset password. Please try again."}})}static{this.\u0275fac=function(o){return new(o||e)(s.rXU(n.ok),s.rXU(f.u),s.rXU(g.Ix),s.rXU(g.nX))}}static{this.\u0275cmp=s.VBU({type:e,selectors:[["app-reset-password"]],standalone:!0,features:[s.aNF],decls:33,vars:15,consts:[[1,"container"],[1,"row","justify-content-center"],[1,"col-md-6","col-lg-5"],[1,"card","border-0","shadow-sm","mt-5"],[1,"card-body","p-4"],[1,"text-center","mb-4"],[1,"fw-bold"],[1,"text-muted"],["class","alert alert-success mb-4",4,"ngIf"],["class","alert alert-danger mb-4",4,"ngIf"],[3,"ngSubmit","formGroup"],[1,"mb-3"],["for","password",1,"form-label"],["type","password","id","password","formControlName","password","placeholder","Enter new password",1,"form-control",3,"ngClass"],["class","invalid-feedback",4,"ngIf"],["for","confirmPassword",1,"form-label"],["type","password","id","confirmPassword","formControlName","confirmPassword","placeholder","Confirm new password",1,"form-control",3,"ngClass"],[1,"d-grid","gap-2","mt-4"],["type","submit",1,"btn","btn-primary",3,"disabled"],["class","spinner-border spinner-border-sm me-2","role","status","aria-hidden","true",4,"ngIf"],[4,"ngIf"],[1,"text-center","mt-4"],["routerLink","/login"],[1,"alert","alert-success","mb-4"],[1,"alert","alert-danger","mb-4"],[1,"invalid-feedback"],["role","status","aria-hidden","true",1,"spinner-border","spinner-border-sm","me-2"]],template:function(o,r){if(1&o&&(s.j41(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"div",4)(5,"div",5)(6,"h2",6),s.EFF(7,"Reset Password"),s.k0s(),s.j41(8,"p",7),s.EFF(9,"Enter your new password"),s.k0s()(),s.DNE(10,w,2,1,"div",8)(11,P,2,1,"div",9),s.j41(12,"form",10),s.bIt("ngSubmit",function(){return r.onSubmit()}),s.j41(13,"div",11)(14,"label",12),s.EFF(15,"New Password"),s.k0s(),s.nrm(16,"input",13),s.DNE(17,b,3,2,"div",14),s.k0s(),s.j41(18,"div",11)(19,"label",15),s.EFF(20,"Confirm Password"),s.k0s(),s.nrm(21,"input",16),s.DNE(22,M,3,2,"div",14),s.k0s(),s.j41(23,"div",17)(24,"button",18),s.DNE(25,R,1,0,"span",19)(26,k,2,0,"span",20)(27,E,2,0,"span",20),s.k0s()()(),s.j41(28,"div",21)(29,"p"),s.EFF(30,"Remember your password? "),s.j41(31,"a",22),s.EFF(32,"Login"),s.k0s()()()()()()()()),2&o){let d,c,l,m;s.R7$(10),s.Y8G("ngIf",r.successMessage),s.R7$(),s.Y8G("ngIf",r.errorMessage),s.R7$(),s.Y8G("formGroup",r.resetPasswordForm),s.R7$(4),s.Y8G("ngClass",s.eq3(11,_,(null==(d=r.resetPasswordForm.get("password"))?null:d.invalid)&&(null==(d=r.resetPasswordForm.get("password"))?null:d.touched))),s.R7$(),s.Y8G("ngIf",(null==(c=r.resetPasswordForm.get("password"))?null:c.invalid)&&(null==(c=r.resetPasswordForm.get("password"))?null:c.touched)),s.R7$(4),s.Y8G("ngClass",s.eq3(13,_,(null==(l=r.resetPasswordForm.get("confirmPassword"))?null:l.touched)&&(null==r.resetPasswordForm.errors?null:r.resetPasswordForm.errors.mismatch)||(null==(l=r.resetPasswordForm.get("confirmPassword"))?null:l.invalid)&&(null==(l=r.resetPasswordForm.get("confirmPassword"))?null:l.touched))),s.R7$(),s.Y8G("ngIf",(null==(m=r.resetPasswordForm.get("confirmPassword"))?null:m.touched)&&(null==r.resetPasswordForm.errors?null:r.resetPasswordForm.errors.mismatch)||(null==(m=r.resetPasswordForm.get("confirmPassword"))?null:m.invalid)&&(null==(m=r.resetPasswordForm.get("confirmPassword"))?null:m.touched)),s.R7$(2),s.Y8G("disabled",r.resetPasswordForm.invalid||r.isLoading),s.R7$(),s.Y8G("ngIf",r.isLoading),s.R7$(),s.Y8G("ngIf",r.isLoading),s.R7$(),s.Y8G("ngIf",!r.isLoading)}},dependencies:[u.MD,u.YU,u.bT,n.X1,n.qT,n.me,n.BC,n.cb,n.j4,n.JD,g.Wk],styles:[".reset-password-container[_ngcontent-%COMP%]{max-width:400px;margin:2rem auto;padding:2rem;border-radius:8px;box-shadow:0 2px 4px #0000001a;background-color:#fff}.form-title[_ngcontent-%COMP%]{text-align:center;margin-bottom:2rem;color:#333}.form-group[_ngcontent-%COMP%]{margin-bottom:1.5rem}.form-control[_ngcontent-%COMP%]{width:100%;padding:.75rem;border:1px solid #ddd;border-radius:4px}.form-control[_ngcontent-%COMP%]:focus{outline:none;border-color:#0056b3;box-shadow:0 0 0 2px #0056b340}.btn-primary[_ngcontent-%COMP%]{width:100%;padding:.75rem;background-color:#0056b3;border:none;border-radius:4px;color:#fff;font-weight:500;cursor:pointer}.btn-primary[_ngcontent-%COMP%]:hover{background-color:#004494}.btn-primary[_ngcontent-%COMP%]:disabled{background-color:#ccc;cursor:not-allowed}.alert[_ngcontent-%COMP%]{padding:1rem;margin-bottom:1rem;border-radius:4px}.alert.alert-danger[_ngcontent-%COMP%]{background-color:#f8d7da;border:1px solid #f5c6cb;color:#721c24}.alert.alert-success[_ngcontent-%COMP%]{background-color:#d4edda;border:1px solid #c3e6cb;color:#155724}.password-requirements[_ngcontent-%COMP%]{font-size:.875rem;color:#666;margin-top:.5rem}.password-requirements[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]{margin:.5rem 0;padding-left:1.5rem}.password-requirements[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{margin-bottom:.25rem}.password-requirements[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li.valid[_ngcontent-%COMP%]{color:#155724}.password-requirements[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li.invalid[_ngcontent-%COMP%]{color:#721c24}"]})}}return e})()}}]);