"use strict";(self.webpackChunkactivity_points_tracker=self.webpackChunkactivity_points_tracker||[]).push([[842],{461:(O,p,l)=>{l.r(p),l.d(p,{LoginComponent:()=>d});var g=l(177),s=l(4341),e=l(2183),F=l(1529),n=l(4438),h=l(8010);const v=t=>({"is-invalid":t});function E(t,m){if(1&t&&(n.j41(0,"div",19),n.EFF(1),n.k0s()),2&t){const i=n.XpG();n.R7$(),n.SpI(" ",i.errorMessage," ")}}function C(t,m){1&t&&(n.j41(0,"small"),n.EFF(1,"Email is required"),n.k0s())}function L(t,m){1&t&&(n.j41(0,"small"),n.EFF(1,"Please enter a valid email"),n.k0s())}function M(t,m){if(1&t&&(n.j41(0,"div",20),n.DNE(1,C,2,0,"small",16)(2,L,2,0,"small",16),n.k0s()),2&t){let i,c;const o=n.XpG();n.R7$(),n.Y8G("ngIf",null==(i=o.loginForm.get("email"))||null==i.errors?null:i.errors.required),n.R7$(),n.Y8G("ngIf",null==(c=o.loginForm.get("email"))||null==c.errors?null:c.errors.email)}}function P(t,m){1&t&&(n.j41(0,"small"),n.EFF(1,"Password is required"),n.k0s())}function r(t,m){if(1&t&&(n.j41(0,"div",20),n.DNE(1,P,2,0,"small",16),n.k0s()),2&t){let i;const c=n.XpG();n.R7$(),n.Y8G("ngIf",null==(i=c.loginForm.get("password"))||null==i.errors?null:i.errors.required)}}function u(t,m){1&t&&(n.j41(0,"span"),n.EFF(1,"Logging in..."),n.k0s())}function a(t,m){1&t&&(n.j41(0,"span"),n.EFF(1,"Login"),n.k0s())}let d=(()=>{class t{constructor(i,c,o){this.fb=i,this.authService=c,this.router=o,this.errorMessage="",this.isLoading=!1,this.loginForm=this.fb.group({email:["",[s.k0.required,s.k0.email]],password:["",s.k0.required]})}onSubmit(){this.loginForm.invalid||(this.isLoading=!0,this.errorMessage="",this.authService.login(this.loginForm.value).subscribe({next:i=>{this.isLoading=!1,this.router.navigate(["/dashboard",i.user.role])},error:i=>{this.isLoading=!1,this.errorMessage=i.error.message||"Login failed. Please try again."}}))}static{this.\u0275fac=function(c){return new(c||t)(n.rXU(s.ok),n.rXU(h.u),n.rXU(e.Ix))}}static{this.\u0275cmp=n.VBU({type:t,selectors:[["app-login"]],standalone:!0,features:[n.aNF],decls:29,vars:13,consts:[[1,"container","py-5"],[1,"row","justify-content-center"],[1,"col-md-6","col-lg-5"],[1,"card","shadow"],[1,"card-body","p-5"],[1,"text-center","mb-4"],["class","alert alert-danger mb-4",4,"ngIf"],[3,"ngSubmit","formGroup"],[1,"mb-3"],["for","email",1,"form-label"],["type","email","id","email","formControlName","email",1,"form-input",3,"ngClass"],["class","text-danger mt-1",4,"ngIf"],["for","password",1,"form-label"],["type","password","id","password","formControlName","password",1,"form-input",3,"ngClass"],[1,"d-grid","gap-2","mt-4"],["type","submit",1,"btn","btn-primary",3,"disabled"],[4,"ngIf"],[1,"text-center","mt-4"],["routerLink","/auth/signup",1,"text-primary"],[1,"alert","alert-danger","mb-4"],[1,"text-danger","mt-1"]],template:function(c,o){if(1&c&&(n.nrm(0,"app-navbar"),n.j41(1,"div",0)(2,"div",1)(3,"div",2)(4,"div",3)(5,"div",4)(6,"h2",5),n.EFF(7,"Login"),n.k0s(),n.DNE(8,E,2,1,"div",6),n.j41(9,"form",7),n.bIt("ngSubmit",function(){return o.onSubmit()}),n.j41(10,"div",8)(11,"label",9),n.EFF(12,"Email Address"),n.k0s(),n.nrm(13,"input",10),n.DNE(14,M,3,2,"div",11),n.k0s(),n.j41(15,"div",8)(16,"label",12),n.EFF(17,"Password"),n.k0s(),n.nrm(18,"input",13),n.DNE(19,r,2,1,"div",11),n.k0s(),n.j41(20,"div",14)(21,"button",15),n.DNE(22,u,2,0,"span",16)(23,a,2,0,"span",16),n.k0s()()(),n.j41(24,"div",17)(25,"p"),n.EFF(26,"Don't have an account? "),n.j41(27,"a",18),n.EFF(28,"Sign up"),n.k0s()()()()()()()()),2&c){let _,f,b,k;n.R7$(8),n.Y8G("ngIf",o.errorMessage),n.R7$(),n.Y8G("formGroup",o.loginForm),n.R7$(4),n.Y8G("ngClass",n.eq3(9,v,(null==(_=o.loginForm.get("email"))?null:_.invalid)&&(null==(_=o.loginForm.get("email"))?null:_.touched))),n.R7$(),n.Y8G("ngIf",(null==(f=o.loginForm.get("email"))?null:f.invalid)&&(null==(f=o.loginForm.get("email"))?null:f.touched)),n.R7$(4),n.Y8G("ngClass",n.eq3(11,v,(null==(b=o.loginForm.get("password"))?null:b.invalid)&&(null==(b=o.loginForm.get("password"))?null:b.touched))),n.R7$(),n.Y8G("ngIf",(null==(k=o.loginForm.get("password"))?null:k.invalid)&&(null==(k=o.loginForm.get("password"))?null:k.touched)),n.R7$(2),n.Y8G("disabled",o.loginForm.invalid||o.isLoading),n.R7$(),n.Y8G("ngIf",o.isLoading),n.R7$(),n.Y8G("ngIf",!o.isLoading)}},dependencies:[g.MD,g.YU,g.bT,s.X1,s.qT,s.me,s.BC,s.cb,s.j4,s.JD,e.Wk,F._],styles:[".card[_ngcontent-%COMP%]{border:none;border-radius:10px}.card-body[_ngcontent-%COMP%]{padding:2rem}.form-input[_ngcontent-%COMP%]{padding:.75rem 1rem;border-radius:5px;border:1px solid #ced4da;width:100%;font-size:1rem;transition:border-color .15s ease-in-out,box-shadow .15s ease-in-out}.form-input[_ngcontent-%COMP%]:focus{border-color:#80bdff;outline:0;box-shadow:0 0 0 .2rem #007bff40}.form-input.is-invalid[_ngcontent-%COMP%]{border-color:#dc3545}.text-danger[_ngcontent-%COMP%]{color:#dc3545}.btn-primary[_ngcontent-%COMP%]{padding:.75rem 1rem;font-weight:500}.shadow[_ngcontent-%COMP%]{box-shadow:0 .5rem 1rem #00000026!important}"]})}}return t})()},1529:(O,p,l)=>{l.d(p,{_:()=>P});var g=l(2183),s=l(177),e=l(4438),F=l(8010);const n=r=>["/dashboard",r];function h(r,u){1&r&&(e.qex(0),e.j41(1,"li",8)(2,"a",9),e.EFF(3,"Login"),e.k0s()(),e.j41(4,"li",8)(5,"a",10),e.EFF(6,"Sign Up"),e.k0s()(),e.bVm())}function v(r,u){1&r&&(e.qex(0),e.j41(1,"li",8)(2,"a",14),e.EFF(3,"My Activities"),e.k0s()(),e.j41(4,"li",8)(5,"a",15),e.EFF(6,"Submit Activity"),e.k0s()(),e.bVm())}function E(r,u){1&r&&(e.j41(0,"li",8)(1,"a",17),e.EFF(2,"Review Activities"),e.k0s()())}function C(r,u){if(1&r&&(e.qex(0),e.DNE(1,E,3,0,"li",16),e.bVm()),2&r){const a=e.XpG(2);e.R7$(),e.Y8G("ngIf","superadmin"===a.currentUser.role)}}function L(r,u){1&r&&(e.qex(0),e.j41(1,"li",18)(2,"a",19),e.EFF(3," Admin "),e.k0s(),e.j41(4,"ul",20)(5,"li")(6,"a",21),e.EFF(7,"Manage Users"),e.k0s()(),e.j41(8,"li")(9,"a",22),e.EFF(10,"Settings"),e.k0s()()()(),e.bVm())}function M(r,u){if(1&r){const a=e.RV6();e.qex(0),e.j41(1,"li",8)(2,"a",11),e.EFF(3,"Dashboard"),e.k0s()(),e.j41(4,"li",8)(5,"a",12),e.EFF(6,"Profile"),e.k0s()(),e.DNE(7,v,7,0,"ng-container",7)(8,C,2,1,"ng-container",7)(9,L,11,0,"ng-container",7),e.j41(10,"li",8)(11,"a",13),e.bIt("click",function(){e.eBV(a);const t=e.XpG();return e.Njj(t.logout())}),e.EFF(12,"Logout"),e.k0s()(),e.bVm()}if(2&r){const a=e.XpG();e.R7$(2),e.Y8G("routerLink",e.eq3(4,n,a.currentUser.role)),e.R7$(5),e.Y8G("ngIf","student"===a.currentUser.role),e.R7$(),e.Y8G("ngIf","teacher"===a.currentUser.role||"superadmin"===a.currentUser.role),e.R7$(),e.Y8G("ngIf","superadmin"===a.currentUser.role)}}let P=(()=>{class r{constructor(a){this.authService=a,this.currentUser=null,this.authService.currentUser$.subscribe(d=>{this.currentUser=d})}logout(){this.authService.logout()}static{this.\u0275fac=function(d){return new(d||r)(e.rXU(F.u))}}static{this.\u0275cmp=e.VBU({type:r,selectors:[["app-navbar"]],standalone:!0,features:[e.aNF],decls:10,vars:2,consts:[[1,"navbar","navbar-expand-lg","navbar-dark","bg-primary"],[1,"container"],["routerLink","/",1,"navbar-brand"],["type","button","data-bs-toggle","collapse","data-bs-target","#navbarNav","aria-controls","navbarNav","aria-expanded","false","aria-label","Toggle navigation",1,"navbar-toggler"],[1,"navbar-toggler-icon"],["id","navbarNav",1,"collapse","navbar-collapse"],[1,"navbar-nav","ms-auto"],[4,"ngIf"],[1,"nav-item"],["routerLink","/auth/login","routerLinkActive","active",1,"nav-link"],["routerLink","/auth/signup","routerLinkActive","active",1,"nav-link"],["routerLinkActive","active",1,"nav-link",3,"routerLink"],["routerLink","/profile","routerLinkActive","active",1,"nav-link"],["href","javascript:void(0)",1,"nav-link",3,"click"],["routerLink","/activities","routerLinkActive","active",1,"nav-link"],["routerLink","/activities/submit","routerLinkActive","active",1,"nav-link"],["class","nav-item",4,"ngIf"],["routerLink","/review","routerLinkActive","active",1,"nav-link"],[1,"nav-item","dropdown"],["href","#","id","adminDropdown","role","button","data-bs-toggle","dropdown","aria-expanded","false",1,"nav-link","dropdown-toggle"],["aria-labelledby","adminDropdown",1,"dropdown-menu"],["routerLink","/admin/users",1,"dropdown-item"],["routerLink","/admin/settings",1,"dropdown-item"]],template:function(d,t){1&d&&(e.j41(0,"nav",0)(1,"div",1)(2,"a",2),e.EFF(3,"Activity Points Tracker"),e.k0s(),e.j41(4,"button",3),e.nrm(5,"span",4),e.k0s(),e.j41(6,"div",5)(7,"ul",6),e.DNE(8,h,7,0,"ng-container",7)(9,M,13,6,"ng-container",7),e.k0s()()()()),2&d&&(e.R7$(8),e.Y8G("ngIf",!t.currentUser),e.R7$(),e.Y8G("ngIf",t.currentUser))},dependencies:[g.Wk,g.wQ,s.MD,s.bT],styles:[".navbar[_ngcontent-%COMP%]{box-shadow:0 2px 4px #0000001a;margin-bottom:1rem}.navbar-brand[_ngcontent-%COMP%]{font-weight:700;font-size:1.4rem}.nav-link[_ngcontent-%COMP%]{font-weight:500;padding:.5rem 1rem;transition:all .2s ease}.nav-link[_ngcontent-%COMP%]:hover{background-color:#ffffff1a;border-radius:4px}.nav-link.active[_ngcontent-%COMP%]{background-color:#fff3;border-radius:4px}.dropdown-menu[_ngcontent-%COMP%]{border:none;box-shadow:0 4px 6px #0000001a;border-radius:4px}.dropdown-item[_ngcontent-%COMP%]{padding:.5rem 1rem;font-weight:500}.dropdown-item[_ngcontent-%COMP%]:hover{background-color:#f8f9fa}.dropdown-item[_ngcontent-%COMP%]:active{background-color:#e9ecef}"]})}}return r})()}}]);