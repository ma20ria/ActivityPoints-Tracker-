{"version":3,"file":"default-src_app_ui_navbar_navbar_component_ts.js","mappings":"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","sources":["./src/app/core/services/auth.service.ts","./src/app/ui/navbar/navbar.component.ts","./src/app/ui/navbar/navbar.component.html"],"sourcesContent":["import { Injectable } from '@angular/core';\r\nimport { HttpClient } from '@angular/common/http';\r\nimport { BehaviorSubject, Observable, tap } from 'rxjs';\r\nimport { User } from '../models/user.model';\r\nimport { Router } from '@angular/router';\r\n\r\ninterface AuthResponse {\r\n  token: string;\r\n  user: User;\r\n}\r\n\r\n@Injectable({\r\n  providedIn: 'root'\r\n})\r\nexport class AuthService {\r\n  private apiUrl = 'http://localhost:5000/api/auth';\r\n  private currentUserSubject = new BehaviorSubject<User | null>(null);\r\n  public currentUser$ = this.currentUserSubject.asObservable();\r\n\r\n  constructor(private http: HttpClient, private router: Router) {\r\n    this.loadUserFromStorage();\r\n  }\r\n\r\n  private loadUserFromStorage(): void {\r\n    const userData = localStorage.getItem('user');\r\n    if (userData) {\r\n      this.currentUserSubject.next(JSON.parse(userData));\r\n    }\r\n  }\r\n\r\n  register(userData: any): Observable<AuthResponse> {\r\n    return this.http.post<AuthResponse>(`${this.apiUrl}/register`, userData)\r\n      .pipe(\r\n        tap(response => this.handleAuthentication(response))\r\n      );\r\n  }\r\n\r\n  login(credentials: { email: string; password: string }): Observable<AuthResponse> {\r\n    return this.http.post<AuthResponse>(`${this.apiUrl}/login`, credentials)\r\n      .pipe(\r\n        tap(response => this.handleAuthentication(response))\r\n      );\r\n  }\r\n\r\n  logout(): void {\r\n    localStorage.removeItem('token');\r\n    localStorage.removeItem('user');\r\n    this.currentUserSubject.next(null);\r\n    this.router.navigate(['/login']);\r\n  }\r\n\r\n  private handleAuthentication(response: AuthResponse): void {\r\n    localStorage.setItem('token', response.token);\r\n    localStorage.setItem('user', JSON.stringify(response.user));\r\n    this.currentUserSubject.next(response.user);\r\n  }\r\n\r\n  isAuthenticated(): boolean {\r\n    return !!localStorage.getItem('token');\r\n  }\r\n\r\n  getCurrentUser(): User | null {\r\n    return this.currentUserSubject.value;\r\n  }\r\n\r\n  getCurrentUserRole(): string | null {\r\n    const user = this.getCurrentUser();\r\n    return user ? user.role : null;\r\n  }\r\n\r\n  getAuthToken(): string | null {\r\n    return localStorage.getItem('token');\r\n  }\r\n} ","import { Component } from '@angular/core';\r\nimport { RouterLink } from '@angular/router';\r\nimport { CommonModule } from '@angular/common';\r\nimport { AuthService } from '../../core/services/auth.service';\r\nimport { User } from '../../core/models/user.model';\r\n\r\n@Component({\r\n  selector: 'app-navbar',\r\n  standalone: true,\r\n  imports: [RouterLink, CommonModule],\r\n  templateUrl: './navbar.component.html',\r\n  styleUrls: ['./navbar.component.scss']\r\n})\r\nexport class NavbarComponent {\r\n  currentUser: User | null = null;\r\n\r\n  constructor(public authService: AuthService) {\r\n    this.authService.currentUser$.subscribe(user => {\r\n      this.currentUser = user;\r\n    });\r\n  }\r\n\r\n  logout(): void {\r\n    this.authService.logout();\r\n  }\r\n} ","<nav class=\"navbar navbar-expand-lg navbar-dark bg-primary\">\r\n  <div class=\"container\">\r\n    <a class=\"navbar-brand\" routerLink=\"/\">Activity Points Tracker</a>\r\n    \r\n    <button class=\"navbar-toggler\" type=\"button\" data-bs-toggle=\"collapse\" data-bs-target=\"#navbarNav\" aria-controls=\"navbarNav\" aria-expanded=\"false\" aria-label=\"Toggle navigation\">\r\n      <span class=\"navbar-toggler-icon\"></span>\r\n    </button>\r\n    \r\n    <div class=\"collapse navbar-collapse\" id=\"navbarNav\">\r\n      <ul class=\"navbar-nav ms-auto\">\r\n        <!-- Not logged in -->\r\n        <ng-container *ngIf=\"!currentUser\">\r\n          <li class=\"nav-item\">\r\n            <a class=\"nav-link\" routerLink=\"/login\" routerLinkActive=\"active\">Login</a>\r\n          </li>\r\n          <li class=\"nav-item\">\r\n            <a class=\"nav-link\" routerLink=\"/signup\" routerLinkActive=\"active\">Sign Up</a>\r\n          </li>\r\n        </ng-container>\r\n        \r\n        <!-- Logged in - All users -->\r\n        <ng-container *ngIf=\"currentUser\">\r\n          <li class=\"nav-item\">\r\n            <a class=\"nav-link\" [routerLink]=\"['/dashboard', currentUser.role]\" routerLinkActive=\"active\">Dashboard</a>\r\n          </li>\r\n          <li class=\"nav-item\">\r\n            <a class=\"nav-link\" routerLink=\"/profile\" routerLinkActive=\"active\">Profile</a>\r\n          </li>\r\n          \r\n          <!-- Student specific -->\r\n          <ng-container *ngIf=\"currentUser.role === 'student'\">\r\n            <li class=\"nav-item\">\r\n              <a class=\"nav-link\" routerLink=\"/activities\" routerLinkActive=\"active\">My Activities</a>\r\n            </li>\r\n            <li class=\"nav-item\">\r\n              <a class=\"nav-link\" routerLink=\"/activities/submit\" routerLinkActive=\"active\">Submit Activity</a>\r\n            </li>\r\n          </ng-container>\r\n          \r\n          <!-- Teacher specific -->\r\n          <ng-container *ngIf=\"currentUser.role === 'teacher' || currentUser.role === 'superadmin'\">\r\n            <li class=\"nav-item\">\r\n              <a class=\"nav-link\" routerLink=\"/review\" routerLinkActive=\"active\">Review Activities</a>\r\n            </li>\r\n            <li class=\"nav-item\">\r\n              <a class=\"nav-link\" routerLink=\"/reports\" routerLinkActive=\"active\">Reports</a>\r\n            </li>\r\n          </ng-container>\r\n          \r\n          <!-- Superadmin specific -->\r\n          <ng-container *ngIf=\"currentUser.role === 'superadmin'\">\r\n            <li class=\"nav-item dropdown\">\r\n              <a class=\"nav-link dropdown-toggle\" href=\"#\" id=\"adminDropdown\" role=\"button\" data-bs-toggle=\"dropdown\" aria-expanded=\"false\">\r\n                Admin\r\n              </a>\r\n              <ul class=\"dropdown-menu\" aria-labelledby=\"adminDropdown\">\r\n                <li><a class=\"dropdown-item\" routerLink=\"/admin/users\">Manage Users</a></li>\r\n                <li><a class=\"dropdown-item\" routerLink=\"/admin/settings\">Settings</a></li>\r\n              </ul>\r\n            </li>\r\n          </ng-container>\r\n          \r\n          <!-- Logout -->\r\n          <li class=\"nav-item\">\r\n            <a class=\"nav-link\" href=\"javascript:void(0)\" (click)=\"logout()\">Logout</a>\r\n          </li>\r\n        </ng-container>\r\n      </ul>\r\n    </div>\r\n  </div>\r\n</nav> "],"names":["BehaviorSubject","tap","AuthService","constructor","http","router","apiUrl","currentUserSubject","currentUser$","asObservable","loadUserFromStorage","userData","localStorage","getItem","next","JSON","parse","register","post","pipe","response","handleAuthentication","login","credentials","logout","removeItem","navigate","setItem","token","stringify","user","isAuthenticated","getCurrentUser","value","getCurrentUserRole","role","getAuthToken","i0","ɵɵinject","i1","HttpClient","i2","Router","factory","ɵfac","providedIn","RouterLink","CommonModule","ɵɵelementContainerStart","ɵɵelementStart","ɵɵtext","ɵɵelementEnd","ɵɵtemplate","NavbarComponent_ng_container_9_ng_container_7_Template","NavbarComponent_ng_container_9_ng_container_8_Template","NavbarComponent_ng_container_9_ng_container_9_Template","ɵɵlistener","NavbarComponent_ng_container_9_Template_a_click_11_listener","ɵɵrestoreView","_r1","ctx_r1","ɵɵnextContext","ɵɵresetView","ɵɵadvance","ɵɵproperty","ɵɵpureFunction1","_c0","currentUser","NavbarComponent","authService","subscribe","ɵɵdirectiveInject","selectors","standalone","features","ɵɵStandaloneFeature","decls","vars","consts","template","NavbarComponent_Template","rf","ctx","ɵɵelement","NavbarComponent_ng_container_8_Template","NavbarComponent_ng_container_9_Template","NgIf","styles"],"sourceRoot":"webpack:///","x_google_ignoreList":[]}