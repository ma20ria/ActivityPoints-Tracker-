{"ast":null,"code":"import { CommonModule } from '@angular/common';\nimport { RouterLink } from '@angular/router';\nimport { NavbarComponent } from '../../../../ui/navbar/navbar.component';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"../../../../core/services/activity.service\";\nimport * as i2 from \"../../../../core/services/auth.service\";\nimport * as i3 from \"../../../../core/services/user.service\";\nimport * as i4 from \"@angular/common\";\nfunction ReportComponent_div_9_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 9)(1, \"div\", 10)(2, \"span\", 11);\n    i0.ɵɵtext(3, \"Loading...\");\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(4, \"p\", 12);\n    i0.ɵɵtext(5, \"Loading report data...\");\n    i0.ɵɵelementEnd()();\n  }\n}\nfunction ReportComponent_div_10_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 13);\n    i0.ɵɵtext(1);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const ctx_r0 = i0.ɵɵnextContext();\n    i0.ɵɵadvance();\n    i0.ɵɵtextInterpolate1(\" \", ctx_r0.error, \" \");\n  }\n}\nfunction ReportComponent_div_11_tr_23_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"tr\")(1, \"td\");\n    i0.ɵɵtext(2);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(3, \"td\");\n    i0.ɵɵtext(4);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(5, \"td\");\n    i0.ɵɵtext(6);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(7, \"td\");\n    i0.ɵɵtext(8);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(9, \"td\");\n    i0.ɵɵtext(10);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(11, \"td\");\n    i0.ɵɵtext(12);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(13, \"td\");\n    i0.ɵɵtext(14);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(15, \"td\");\n    i0.ɵɵtext(16);\n    i0.ɵɵelementEnd()();\n  }\n  if (rf & 2) {\n    const student_r2 = ctx.$implicit;\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(student_r2.student.name);\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(student_r2.student.rollNumber);\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(student_r2.student.class);\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(student_r2.totalActivities);\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(student_r2.approvedActivities);\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(student_r2.pendingActivities);\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(student_r2.rejectedActivities);\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(student_r2.totalPoints);\n  }\n}\nfunction ReportComponent_div_11_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 14)(1, \"div\", 15)(2, \"div\", 16)(3, \"table\", 17)(4, \"thead\")(5, \"tr\")(6, \"th\");\n    i0.ɵɵtext(7, \"Student Name\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(8, \"th\");\n    i0.ɵɵtext(9, \"Roll Number\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(10, \"th\");\n    i0.ɵɵtext(11, \"Class\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(12, \"th\");\n    i0.ɵɵtext(13, \"Total Activities\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(14, \"th\");\n    i0.ɵɵtext(15, \"Approved\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(16, \"th\");\n    i0.ɵɵtext(17, \"Pending\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(18, \"th\");\n    i0.ɵɵtext(19, \"Rejected\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(20, \"th\");\n    i0.ɵɵtext(21, \"Total Points\");\n    i0.ɵɵelementEnd()()();\n    i0.ɵɵelementStart(22, \"tbody\");\n    i0.ɵɵtemplate(23, ReportComponent_div_11_tr_23_Template, 17, 8, \"tr\", 18);\n    i0.ɵɵelementEnd()()()()();\n  }\n  if (rf & 2) {\n    const ctx_r0 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(23);\n    i0.ɵɵproperty(\"ngForOf\", ctx_r0.reportData);\n  }\n}\nfunction ReportComponent_div_12_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 9)(1, \"p\", 19);\n    i0.ɵɵtext(2, \"No students are currently assigned to you.\");\n    i0.ɵɵelementEnd()();\n  }\n}\nexport let ReportComponent = /*#__PURE__*/(() => {\n  class ReportComponent {\n    constructor(activityService, authService, userService) {\n      this.activityService = activityService;\n      this.authService = authService;\n      this.userService = userService;\n      this.reportData = [];\n      this.isLoading = true;\n      this.error = null;\n      this.currentUser = null;\n    }\n    ngOnInit() {\n      this.currentUser = this.authService.getCurrentUser();\n      if (!this.currentUser) {\n        this.error = 'User not authenticated';\n        this.isLoading = false;\n        return;\n      }\n      this.loadAssignedStudentsReport();\n    }\n    loadAssignedStudentsReport() {\n      if (!this.currentUser?._id) {\n        this.error = 'User ID not found';\n        this.isLoading = false;\n        return;\n      }\n      // First get the list of students assigned to this teacher\n      this.userService.getAssignedStudents(this.currentUser._id).subscribe({\n        next: students => {\n          if (!students || students.length === 0) {\n            this.reportData = [];\n            this.isLoading = false;\n            return;\n          }\n          // Get the student IDs\n          const studentIds = students.map(student => student._id);\n          // Now get activities report for these specific students\n          this.activityService.generateReport({\n            teacherId: this.currentUser._id,\n            studentIds: studentIds.join(',')\n          }).subscribe({\n            next: response => {\n              if (response && response.data) {\n                this.reportData = response.data;\n              } else {\n                this.reportData = [];\n              }\n              this.isLoading = false;\n            },\n            error: error => {\n              this.error = error.message || 'Failed to load report data';\n              this.isLoading = false;\n            }\n          });\n        },\n        error: error => {\n          this.error = error.error?.message || 'Failed to load assigned students';\n          this.isLoading = false;\n        }\n      });\n    }\n    static {\n      this.ɵfac = function ReportComponent_Factory(t) {\n        return new (t || ReportComponent)(i0.ɵɵdirectiveInject(i1.ActivityService), i0.ɵɵdirectiveInject(i2.AuthService), i0.ɵɵdirectiveInject(i3.UserService));\n      };\n    }\n    static {\n      this.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n        type: ReportComponent,\n        selectors: [[\"app-report\"]],\n        standalone: true,\n        features: [i0.ɵɵStandaloneFeature],\n        decls: 13,\n        vars: 4,\n        consts: [[1, \"container\", \"py-4\"], [1, \"row\", \"mb-4\"], [1, \"col-12\"], [1, \"d-flex\", \"justify-content-between\", \"align-items-center\"], [1, \"mb-0\"], [\"routerLink\", \"/dashboard/teacher\", 1, \"btn\", \"btn-outline-primary\"], [\"class\", \"text-center py-5\", 4, \"ngIf\"], [\"class\", \"alert alert-danger\", 4, \"ngIf\"], [\"class\", \"card shadow-sm\", 4, \"ngIf\"], [1, \"text-center\", \"py-5\"], [\"role\", \"status\", 1, \"spinner-border\", \"text-primary\"], [1, \"visually-hidden\"], [1, \"mt-2\", \"text-muted\"], [1, \"alert\", \"alert-danger\"], [1, \"card\", \"shadow-sm\"], [1, \"card-body\"], [1, \"table-responsive\"], [1, \"table\", \"table-hover\"], [4, \"ngFor\", \"ngForOf\"], [1, \"text-muted\", \"mb-0\"]],\n        template: function ReportComponent_Template(rf, ctx) {\n          if (rf & 1) {\n            i0.ɵɵelement(0, \"app-navbar\");\n            i0.ɵɵelementStart(1, \"div\", 0)(2, \"div\", 1)(3, \"div\", 2)(4, \"div\", 3)(5, \"h1\", 4);\n            i0.ɵɵtext(6, \"My Students Activity Report\");\n            i0.ɵɵelementEnd();\n            i0.ɵɵelementStart(7, \"a\", 5);\n            i0.ɵɵtext(8, \"Back to Dashboard\");\n            i0.ɵɵelementEnd()()()();\n            i0.ɵɵtemplate(9, ReportComponent_div_9_Template, 6, 0, \"div\", 6)(10, ReportComponent_div_10_Template, 2, 1, \"div\", 7)(11, ReportComponent_div_11_Template, 24, 1, \"div\", 8)(12, ReportComponent_div_12_Template, 3, 0, \"div\", 6);\n            i0.ɵɵelementEnd();\n          }\n          if (rf & 2) {\n            i0.ɵɵadvance(9);\n            i0.ɵɵproperty(\"ngIf\", ctx.isLoading);\n            i0.ɵɵadvance();\n            i0.ɵɵproperty(\"ngIf\", ctx.error);\n            i0.ɵɵadvance();\n            i0.ɵɵproperty(\"ngIf\", !ctx.isLoading && !ctx.error && ctx.reportData.length > 0);\n            i0.ɵɵadvance();\n            i0.ɵɵproperty(\"ngIf\", !ctx.isLoading && !ctx.error && ctx.reportData.length === 0);\n          }\n        },\n        dependencies: [CommonModule, i4.NgForOf, i4.NgIf, RouterLink, NavbarComponent],\n        styles: [\".shadow-sm[_ngcontent-%COMP%]{box-shadow:0 .125rem .25rem #00000013!important}.table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{font-weight:600;background-color:#f8f9fa}.table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{vertical-align:middle}\"]\n      });\n    }\n  }\n  return ReportComponent;\n})();","map":null,"metadata":{},"sourceType":"module","externalDependencies":[]}