{"ast":null,"code":"import { HttpHeaders } from '@angular/common/http';\nimport { throwError } from 'rxjs';\nimport { catchError } from 'rxjs/operators';\nimport { environment } from '../../../environments/environment';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"@angular/common/http\";\nimport * as i2 from \"./auth.service\";\nexport class ActivityService {\n  constructor(http, authService) {\n    this.http = http;\n    this.authService = authService;\n    this.apiUrl = environment.apiUrl;\n  }\n  getHeaders() {\n    const token = localStorage.getItem('token');\n    if (!token) {\n      throw new Error('No authentication token found');\n    }\n    return new HttpHeaders({\n      'Authorization': `Bearer ${token}`\n    });\n  }\n  getApiUrl() {\n    return this.apiUrl;\n  }\n  submitActivity(formData) {\n    const token = localStorage.getItem('token');\n    if (!token) {\n      console.error('No authentication token found');\n      return throwError(() => new Error('Authentication token not found'));\n    }\n    console.log('Submitting activity with token:', token.substring(0, 10) + '...');\n    const headers = new HttpHeaders({\n      'Authorization': `Bearer ${token}`\n    });\n    // Log form data contents (excluding file)\n    const formDataEntries = Array.from(formData.entries());\n    console.log('Form data contents:', formDataEntries.map(entry => entry[0] === 'certificateFile' ? [entry[0], 'File object'] : entry));\n    return this.http.post(`${this.apiUrl}/activities/submit`, formData, {\n      headers,\n      reportProgress: true\n    }).pipe(catchError(error => {\n      console.error('Activity submission error details:', {\n        status: error.status,\n        statusText: error.statusText,\n        error: error.error,\n        headers: error.headers,\n        url: error.url\n      });\n      if (error.status === 401) {\n        console.error('Authentication failed - token expired or invalid');\n        localStorage.removeItem('token');\n        return throwError(() => new Error('Session expired. Please login again.'));\n      }\n      if (error.status === 400) {\n        console.error('Bad request - validation error');\n        return throwError(() => new Error(error.error?.message || 'Invalid form data. Please check your inputs.'));\n      }\n      if (error.status === 413) {\n        console.error('File too large');\n        return throwError(() => new Error('File size exceeds the limit. Please upload a smaller file.'));\n      }\n      if (error.status === 500) {\n        console.error('Server error');\n        return throwError(() => new Error('Server error occurred. Please try again later.'));\n      }\n      return throwError(() => new Error(error.error?.message || 'Failed to submit activity. Please try again.'));\n    }));\n  }\n  getMyActivities() {\n    const headers = this.getHeaders();\n    return this.http.get(`${this.apiUrl}/activities/my-activities`, {\n      headers\n    }).pipe(catchError(this.handleError));\n  }\n  getPendingActivities() {\n    const headers = this.getHeaders();\n    return this.http.get(`${this.apiUrl}/activities/pending`, {\n      headers\n    }).pipe(catchError(this.handleError));\n  }\n  reviewActivity(activityId, review) {\n    const token = localStorage.getItem('token');\n    if (!token) {\n      return throwError(() => new Error('No authentication token found'));\n    }\n    const headers = new HttpHeaders({\n      'Authorization': `Bearer ${token}`,\n      'Content-Type': 'application/json'\n    });\n    return this.http.put(`${this.apiUrl}/activities/${activityId}/review`, review, {\n      headers\n    }).pipe(catchError(error => {\n      console.error('Error reviewing activity:', error);\n      let errorMessage = 'Failed to review activity';\n      if (error.status === 401) {\n        errorMessage = 'Authentication failed. Please log in again.';\n      } else if (error.status === 404) {\n        errorMessage = 'Activity not found';\n      } else if (error.status === 400) {\n        errorMessage = error.error?.message || 'Invalid review data';\n      }\n      return throwError(() => new Error(errorMessage));\n    }));\n  }\n  getAllActivities() {\n    const headers = this.getHeaders();\n    return this.http.get(`${this.apiUrl}/activities`, {\n      headers\n    }).pipe(catchError(this.handleError));\n  }\n  generateReport(params = {}) {\n    const headers = this.getHeaders();\n    const queryParams = new URLSearchParams();\n    if (params.teacherId) queryParams.append('teacherId', params.teacherId);\n    if (params.studentIds) queryParams.append('studentIds', params.studentIds);\n    if (params.department) queryParams.append('department', params.department);\n    if (params.class) queryParams.append('class', params.class);\n    if (params.semester) queryParams.append('semester', params.semester);\n    if (params.status) queryParams.append('status', params.status);\n    const url = `${this.apiUrl}/activities/report?${queryParams.toString()}`;\n    return this.http.get(url, {\n      headers\n    });\n  }\n  updateActivityStatus(activityId, status) {\n    const token = localStorage.getItem('token');\n    if (!token) {\n      return throwError(() => new Error('Authentication token not found'));\n    }\n    const headers = new HttpHeaders({\n      'Authorization': `Bearer ${token}`,\n      'Content-Type': 'application/json'\n    });\n    return this.http.patch(`${this.apiUrl}/activities/${activityId}/status`, {\n      status\n    }, {\n      headers\n    }).pipe(catchError(error => {\n      console.error('Activity status update error:', {\n        status: error.status,\n        statusText: error.statusText,\n        error: error.error\n      });\n      if (error.status === 401) {\n        return throwError(() => new Error('Session expired. Please login again.'));\n      }\n      if (error.status === 404) {\n        return throwError(() => new Error('Activity not found.'));\n      }\n      if (error.status === 400) {\n        return throwError(() => new Error(error.error?.message || 'Invalid request.'));\n      }\n      return throwError(() => new Error(error.error?.message || 'Failed to update activity status.'));\n    }));\n  }\n  handleError(error) {\n    let errorMessage = 'An unknown error occurred';\n    if (error.error instanceof ErrorEvent) {\n      // Client-side error\n      errorMessage = `Error: ${error.error.message}`;\n    } else {\n      // Server-side error\n      if (error.status === 401) {\n        errorMessage = 'Please login again to continue';\n        // Redirect to login if unauthorized\n        window.location.href = '/auth/login';\n      } else if (error.error && error.error.message) {\n        errorMessage = error.error.message;\n      } else {\n        errorMessage = `Server error. Please try again.`;\n      }\n    }\n    console.error('API Error:', error);\n    return throwError(() => new Error(errorMessage));\n  }\n  static {\n    this.ɵfac = function ActivityService_Factory(t) {\n      return new (t || ActivityService)(i0.ɵɵinject(i1.HttpClient), i0.ɵɵinject(i2.AuthService));\n    };\n  }\n  static {\n    this.ɵprov = /*@__PURE__*/i0.ɵɵdefineInjectable({\n      token: ActivityService,\n      factory: ActivityService.ɵfac,\n      providedIn: 'root'\n    });\n  }\n}","map":{"version":3,"names":["HttpHeaders","throwError","catchError","environment","ActivityService","constructor","http","authService","apiUrl","getHeaders","token","localStorage","getItem","Error","getApiUrl","submitActivity","formData","console","error","log","substring","headers","formDataEntries","Array","from","entries","map","entry","post","reportProgress","pipe","status","statusText","url","removeItem","message","getMyActivities","get","handleError","getPendingActivities","reviewActivity","activityId","review","put","errorMessage","getAllActivities","generateReport","params","queryParams","URLSearchParams","teacherId","append","studentIds","department","class","semester","toString","updateActivityStatus","patch","ErrorEvent","window","location","href","i0","ɵɵinject","i1","HttpClient","i2","AuthService","factory","ɵfac","providedIn"],"sources":["C:\\Users\\LENOVO\\OneDrive\\Desktop\\finalminitrack\\ActivityPoints-Tracker-\\frontend\\src\\app\\core\\services\\activity.service.ts"],"sourcesContent":["import { Injectable } from '@angular/core';\nimport { HttpClient, HttpErrorResponse, HttpHeaders } from '@angular/common/http';\nimport { Observable, throwError } from 'rxjs';\nimport { catchError } from 'rxjs/operators';\nimport { Activity } from '../models/activity.model';\nimport { ApiResponse } from '../models/api-response.model';\nimport { environment } from '../../../environments/environment';\nimport { AuthService } from './auth.service';\n\ninterface PendingActivitiesResponse {\n  success: boolean;\n  count: number;\n  stats: {\n    pending: number;\n    approved: number;\n    rejected: number;\n  };\n  data: Activity[];\n}\n\n@Injectable({\n  providedIn: 'root'\n})\nexport class ActivityService {\n  private apiUrl = environment.apiUrl;\n\n  constructor(\n    private http: HttpClient,\n    private authService: AuthService\n  ) { }\n\n  private getHeaders(): HttpHeaders {\n    const token = localStorage.getItem('token');\n    if (!token) {\n      throw new Error('No authentication token found');\n    }\n    return new HttpHeaders({\n      'Authorization': `Bearer ${token}`\n    });\n  }\n\n  getApiUrl(): string {\n    return this.apiUrl;\n  }\n\n  submitActivity(formData: FormData): Observable<ApiResponse<Activity>> {\n    const token = localStorage.getItem('token');\n    if (!token) {\n      console.error('No authentication token found');\n      return throwError(() => new Error('Authentication token not found'));\n    }\n\n    console.log('Submitting activity with token:', token.substring(0, 10) + '...');\n    \n    const headers = new HttpHeaders({\n      'Authorization': `Bearer ${token}`\n    });\n\n    // Log form data contents (excluding file)\n    const formDataEntries = Array.from((formData as any).entries());\n    console.log('Form data contents:', formDataEntries.map((entry: [string, any]) => \n      entry[0] === 'certificateFile' ? [entry[0], 'File object'] : entry\n    ));\n    \n    return this.http.post<ApiResponse<Activity>>(`${this.apiUrl}/activities/submit`, formData, { \n      headers,\n      reportProgress: true\n    }).pipe(\n      catchError((error: HttpErrorResponse) => {\n        console.error('Activity submission error details:', {\n          status: error.status,\n          statusText: error.statusText,\n          error: error.error,\n          headers: error.headers,\n          url: error.url\n        });\n\n        if (error.status === 401) {\n          console.error('Authentication failed - token expired or invalid');\n          localStorage.removeItem('token');\n          return throwError(() => new Error('Session expired. Please login again.'));\n        }\n\n        if (error.status === 400) {\n          console.error('Bad request - validation error');\n          return throwError(() => new Error(error.error?.message || 'Invalid form data. Please check your inputs.'));\n        }\n\n        if (error.status === 413) {\n          console.error('File too large');\n          return throwError(() => new Error('File size exceeds the limit. Please upload a smaller file.'));\n        }\n\n        if (error.status === 500) {\n          console.error('Server error');\n          return throwError(() => new Error('Server error occurred. Please try again later.'));\n        }\n\n        return throwError(() => new Error(error.error?.message || 'Failed to submit activity. Please try again.'));\n      })\n    );\n  }\n\n  getMyActivities(): Observable<ApiResponse<Activity[]>> {\n    const headers = this.getHeaders();\n    return this.http.get<ApiResponse<Activity[]>>(`${this.apiUrl}/activities/my-activities`, { headers })\n      .pipe(\n        catchError(this.handleError)\n      );\n  }\n\n  getPendingActivities(): Observable<PendingActivitiesResponse> {\n    const headers = this.getHeaders();\n    return this.http.get<PendingActivitiesResponse>(`${this.apiUrl}/activities/pending`, { headers })\n      .pipe(\n        catchError(this.handleError)\n      );\n  }\n\n  reviewActivity(activityId: string, review: { status: 'approved' | 'rejected', feedback?: string }): Observable<ApiResponse<Activity>> {\n    const token = localStorage.getItem('token');\n    if (!token) {\n      return throwError(() => new Error('No authentication token found'));\n    }\n\n    const headers = new HttpHeaders({\n      'Authorization': `Bearer ${token}`,\n      'Content-Type': 'application/json'\n    });\n\n    return this.http.put<ApiResponse<Activity>>(`${this.apiUrl}/activities/${activityId}/review`, review, { headers }).pipe(\n      catchError((error: HttpErrorResponse) => {\n        console.error('Error reviewing activity:', error);\n        let errorMessage = 'Failed to review activity';\n        \n        if (error.status === 401) {\n          errorMessage = 'Authentication failed. Please log in again.';\n        } else if (error.status === 404) {\n          errorMessage = 'Activity not found';\n        } else if (error.status === 400) {\n          errorMessage = error.error?.message || 'Invalid review data';\n        }\n        \n        return throwError(() => new Error(errorMessage));\n      })\n    );\n  }\n\n  getAllActivities(): Observable<ApiResponse<Activity[]>> {\n    const headers = this.getHeaders();\n    return this.http.get<ApiResponse<Activity[]>>(`${this.apiUrl}/activities`, { headers })\n      .pipe(\n        catchError(this.handleError)\n      );\n  }\n\n  generateReport(params: { \n    teacherId?: string;\n    studentIds?: string;\n    department?: string; \n    class?: string;\n    semester?: string; \n    status?: string \n  } = {}): Observable<ApiResponse<any>> {\n    const headers = this.getHeaders();\n    const queryParams = new URLSearchParams();\n    \n    if (params.teacherId) queryParams.append('teacherId', params.teacherId);\n    if (params.studentIds) queryParams.append('studentIds', params.studentIds);\n    if (params.department) queryParams.append('department', params.department);\n    if (params.class) queryParams.append('class', params.class);\n    if (params.semester) queryParams.append('semester', params.semester);\n    if (params.status) queryParams.append('status', params.status);\n    \n    const url = `${this.apiUrl}/activities/report?${queryParams.toString()}`;\n    return this.http.get<ApiResponse<any>>(url, { headers });\n  }\n\n  updateActivityStatus(activityId: string, status: 'approved' | 'rejected'): Observable<ApiResponse<Activity>> {\n    const token = localStorage.getItem('token');\n    if (!token) {\n      return throwError(() => new Error('Authentication token not found'));\n    }\n\n    const headers = new HttpHeaders({\n      'Authorization': `Bearer ${token}`,\n      'Content-Type': 'application/json'\n    });\n\n    return this.http.patch<ApiResponse<Activity>>(\n      `${this.apiUrl}/activities/${activityId}/status`,\n      { status },\n      { headers }\n    ).pipe(\n      catchError((error: HttpErrorResponse) => {\n        console.error('Activity status update error:', {\n          status: error.status,\n          statusText: error.statusText,\n          error: error.error\n        });\n\n        if (error.status === 401) {\n          return throwError(() => new Error('Session expired. Please login again.'));\n        }\n\n        if (error.status === 404) {\n          return throwError(() => new Error('Activity not found.'));\n        }\n\n        if (error.status === 400) {\n          return throwError(() => new Error(error.error?.message || 'Invalid request.'));\n        }\n\n        return throwError(() => new Error(error.error?.message || 'Failed to update activity status.'));\n      })\n    );\n  }\n\n  private handleError(error: HttpErrorResponse) {\n    let errorMessage = 'An unknown error occurred';\n    \n    if (error.error instanceof ErrorEvent) {\n      // Client-side error\n      errorMessage = `Error: ${error.error.message}`;\n    } else {\n      // Server-side error\n      if (error.status === 401) {\n        errorMessage = 'Please login again to continue';\n        // Redirect to login if unauthorized\n        window.location.href = '/auth/login';\n      } else if (error.error && error.error.message) {\n        errorMessage = error.error.message;\n      } else {\n        errorMessage = `Server error. Please try again.`;\n      }\n    }\n    \n    console.error('API Error:', error);\n    return throwError(() => new Error(errorMessage));\n  }\n} "],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}