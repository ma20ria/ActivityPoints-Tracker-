{"ast":null,"code":"import { CommonModule } from '@angular/common';\nimport { ReactiveFormsModule } from '@angular/forms';\nimport { NavbarComponent } from '../../../ui/navbar/navbar.component';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"../../../core/services/auth.service\";\nimport * as i2 from \"../../../core/services/activity.service\";\nimport * as i3 from \"@angular/forms\";\nimport * as i4 from \"@angular/common\";\nfunction TeacherDashboardComponent_div_7_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 17)(1, \"div\", 18)(2, \"span\", 19);\n    i0.ɵɵtext(3, \"Loading...\");\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(4, \"p\", 20);\n    i0.ɵɵtext(5, \"Loading your dashboard...\");\n    i0.ɵɵelementEnd()();\n  }\n}\nfunction TeacherDashboardComponent_div_8_div_28_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 34)(1, \"p\", 25);\n    i0.ɵɵtext(2, \"No pending certificate requests.\");\n    i0.ɵɵelementEnd()();\n  }\n}\nfunction TeacherDashboardComponent_div_8_div_29_tr_15_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r1 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"tr\")(1, \"td\")(2, \"div\", 38)(3, \"span\", 39);\n    i0.ɵɵtext(4);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(5, \"small\", 40);\n    i0.ɵɵtext(6);\n    i0.ɵɵelementEnd()()();\n    i0.ɵɵelementStart(7, \"td\");\n    i0.ɵɵtext(8);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(9, \"td\");\n    i0.ɵɵtext(10);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(11, \"td\");\n    i0.ɵɵtext(12);\n    i0.ɵɵpipe(13, \"date\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(14, \"td\")(15, \"button\", 41);\n    i0.ɵɵlistener(\"click\", function TeacherDashboardComponent_div_8_div_29_tr_15_Template_button_click_15_listener() {\n      const activity_r2 = i0.ɵɵrestoreView(_r1).$implicit;\n      const ctx_r2 = i0.ɵɵnextContext(3);\n      return i0.ɵɵresetView(ctx_r2.selectActivity(activity_r2));\n    });\n    i0.ɵɵtext(16, \" Review \");\n    i0.ɵɵelementEnd()()();\n  }\n  if (rf & 2) {\n    const activity_r2 = ctx.$implicit;\n    const ctx_r2 = i0.ɵɵnextContext(3);\n    i0.ɵɵadvance(4);\n    i0.ɵɵtextInterpolate(ctx_r2.isUserObject(activity_r2.student) ? activity_r2.student.name : \"Unknown\");\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate2(\"\", ctx_r2.isUserObject(activity_r2.student) ? activity_r2.student.rollNumber : \"\", \" | \", ctx_r2.isUserObject(activity_r2.student) ? activity_r2.student.class : \"\", \"\");\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(activity_r2.title);\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(activity_r2.activityType);\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(i0.ɵɵpipeBind2(13, 6, activity_r2.date, \"mediumDate\"));\n  }\n}\nfunction TeacherDashboardComponent_div_8_div_29_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 35)(1, \"table\", 36)(2, \"thead\")(3, \"tr\")(4, \"th\");\n    i0.ɵɵtext(5, \"Student\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(6, \"th\");\n    i0.ɵɵtext(7, \"Title\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(8, \"th\");\n    i0.ɵɵtext(9, \"Type\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(10, \"th\");\n    i0.ɵɵtext(11, \"Date\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(12, \"th\");\n    i0.ɵɵtext(13, \"Actions\");\n    i0.ɵɵelementEnd()()();\n    i0.ɵɵelementStart(14, \"tbody\");\n    i0.ɵɵtemplate(15, TeacherDashboardComponent_div_8_div_29_tr_15_Template, 17, 9, \"tr\", 37);\n    i0.ɵɵelementEnd()()();\n  }\n  if (rf & 2) {\n    const ctx_r2 = i0.ɵɵnextContext(2);\n    i0.ɵɵadvance(15);\n    i0.ɵɵproperty(\"ngForOf\", ctx_r2.pendingActivities);\n  }\n}\nfunction TeacherDashboardComponent_div_8_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\")(1, \"div\", 1)(2, \"div\", 21)(3, \"div\", 22)(4, \"div\", 23)(5, \"h3\", 24);\n    i0.ɵɵtext(6);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(7, \"p\", 25);\n    i0.ɵɵtext(8, \"Pending Requests\");\n    i0.ɵɵelementEnd()()()();\n    i0.ɵɵelementStart(9, \"div\", 21)(10, \"div\", 22)(11, \"div\", 23)(12, \"h3\", 26);\n    i0.ɵɵtext(13);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(14, \"p\", 25);\n    i0.ɵɵtext(15, \"Approved Requests\");\n    i0.ɵɵelementEnd()()()();\n    i0.ɵɵelementStart(16, \"div\", 27)(17, \"div\", 22)(18, \"div\", 23)(19, \"h3\", 28);\n    i0.ɵɵtext(20);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(21, \"p\", 25);\n    i0.ɵɵtext(22, \"Rejected Requests\");\n    i0.ɵɵelementEnd()()()()();\n    i0.ɵɵelementStart(23, \"div\", 29)(24, \"div\", 30)(25, \"h5\", 4);\n    i0.ɵɵtext(26, \"Pending Certificate Requests\");\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(27, \"div\", 31);\n    i0.ɵɵtemplate(28, TeacherDashboardComponent_div_8_div_28_Template, 3, 0, \"div\", 32)(29, TeacherDashboardComponent_div_8_div_29_Template, 16, 1, \"div\", 33);\n    i0.ɵɵelementEnd()()();\n  }\n  if (rf & 2) {\n    const ctx_r2 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(6);\n    i0.ɵɵtextInterpolate(ctx_r2.totalPendingRequests);\n    i0.ɵɵadvance(7);\n    i0.ɵɵtextInterpolate(ctx_r2.totalApprovedRequests);\n    i0.ɵɵadvance(7);\n    i0.ɵɵtextInterpolate(ctx_r2.totalRejectedRequests);\n    i0.ɵɵadvance(8);\n    i0.ɵɵproperty(\"ngIf\", ctx_r2.pendingActivities.length === 0);\n    i0.ɵɵadvance();\n    i0.ɵɵproperty(\"ngIf\", ctx_r2.pendingActivities.length > 0);\n  }\n}\nfunction TeacherDashboardComponent_div_17_div_54_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\")(1, \"a\", 61);\n    i0.ɵɵelement(2, \"i\", 62);\n    i0.ɵɵtext(3, \"View Certificate \");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(4, \"small\", 63);\n    i0.ɵɵtext(5, \"Click to open certificate in a new tab\");\n    i0.ɵɵelementEnd()();\n  }\n  if (rf & 2) {\n    const ctx_r2 = i0.ɵɵnextContext(2);\n    i0.ɵɵadvance();\n    i0.ɵɵproperty(\"href\", ctx_r2.getCertificateUrl(ctx_r2.selectedActivity.certificateFile), i0.ɵɵsanitizeUrl);\n  }\n}\nfunction TeacherDashboardComponent_div_17_p_55_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"p\", 40);\n    i0.ɵɵtext(1, \"No certificate available\");\n    i0.ɵɵelementEnd();\n  }\n}\nfunction TeacherDashboardComponent_div_17_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\")(1, \"div\", 1)(2, \"div\", 42)(3, \"h6\", 43);\n    i0.ɵɵtext(4, \"Student Information\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(5, \"p\", 44)(6, \"strong\");\n    i0.ɵɵtext(7, \"Name:\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵtext(8);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(9, \"p\", 44)(10, \"strong\");\n    i0.ɵɵtext(11, \"Roll Number:\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵtext(12);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(13, \"p\", 44)(14, \"strong\");\n    i0.ɵɵtext(15, \"Class:\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵtext(16);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(17, \"p\", 44)(18, \"strong\");\n    i0.ɵɵtext(19, \"Department:\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵtext(20);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(21, \"p\", 4)(22, \"strong\");\n    i0.ɵɵtext(23, \"Semester:\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵtext(24);\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(25, \"div\", 42)(26, \"h6\", 43);\n    i0.ɵɵtext(27, \"Certificate Information\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(28, \"p\", 44)(29, \"strong\");\n    i0.ɵɵtext(30, \"Title:\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵtext(31);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(32, \"p\", 44)(33, \"strong\");\n    i0.ɵɵtext(34, \"Type:\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵtext(35);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(36, \"p\", 44)(37, \"strong\");\n    i0.ɵɵtext(38, \"Date:\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵtext(39);\n    i0.ɵɵpipe(40, \"date\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(41, \"p\", 4)(42, \"strong\");\n    i0.ɵɵtext(43, \"Submitted On:\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵtext(44);\n    i0.ɵɵpipe(45, \"date\");\n    i0.ɵɵelementEnd()()();\n    i0.ɵɵelementStart(46, \"div\", 45)(47, \"h6\", 43);\n    i0.ɵɵtext(48, \"Description\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(49, \"p\", 4);\n    i0.ɵɵtext(50);\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(51, \"div\", 45)(52, \"h6\", 43);\n    i0.ɵɵtext(53, \"Certificate Preview\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵtemplate(54, TeacherDashboardComponent_div_17_div_54_Template, 6, 1, \"div\", 6)(55, TeacherDashboardComponent_div_17_p_55_Template, 2, 0, \"p\", 46);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(56, \"form\", 47)(57, \"div\", 48)(58, \"label\", 49);\n    i0.ɵɵtext(59, \"Decision\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(60, \"div\", 50)(61, \"div\", 51);\n    i0.ɵɵelement(62, \"input\", 52);\n    i0.ɵɵelementStart(63, \"label\", 53);\n    i0.ɵɵtext(64, \" Approve \");\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(65, \"div\", 54);\n    i0.ɵɵelement(66, \"input\", 55);\n    i0.ɵɵelementStart(67, \"label\", 56);\n    i0.ɵɵtext(68, \" Reject \");\n    i0.ɵɵelementEnd()()()();\n    i0.ɵɵelementStart(69, \"div\", 48)(70, \"label\", 57);\n    i0.ɵɵtext(71, \"Activity Points\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelement(72, \"input\", 58);\n    i0.ɵɵelementStart(73, \"small\", 40);\n    i0.ɵɵtext(74, \"Points calculated based on activity type and level\");\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(75, \"div\", 48)(76, \"label\", 59);\n    i0.ɵɵtext(77, \"Feedback (Optional)\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelement(78, \"textarea\", 60);\n    i0.ɵɵelementEnd()()();\n  }\n  if (rf & 2) {\n    const ctx_r2 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(8);\n    i0.ɵɵtextInterpolate1(\" \", ctx_r2.isUserObject(ctx_r2.selectedActivity.student) ? ctx_r2.selectedActivity.student.name : \"Unknown\", \"\");\n    i0.ɵɵadvance(4);\n    i0.ɵɵtextInterpolate1(\" \", ctx_r2.isUserObject(ctx_r2.selectedActivity.student) ? ctx_r2.selectedActivity.student.rollNumber : \"\", \"\");\n    i0.ɵɵadvance(4);\n    i0.ɵɵtextInterpolate1(\" \", ctx_r2.isUserObject(ctx_r2.selectedActivity.student) ? ctx_r2.selectedActivity.student.class : \"\", \"\");\n    i0.ɵɵadvance(4);\n    i0.ɵɵtextInterpolate1(\" \", ctx_r2.isUserObject(ctx_r2.selectedActivity.student) ? ctx_r2.selectedActivity.student.department : \"\", \"\");\n    i0.ɵɵadvance(4);\n    i0.ɵɵtextInterpolate1(\" \", ctx_r2.isUserObject(ctx_r2.selectedActivity.student) ? ctx_r2.selectedActivity.student.semester : \"\", \"\");\n    i0.ɵɵadvance(7);\n    i0.ɵɵtextInterpolate1(\" \", ctx_r2.selectedActivity.title, \"\");\n    i0.ɵɵadvance(4);\n    i0.ɵɵtextInterpolate1(\" \", ctx_r2.selectedActivity.activityType, \"\");\n    i0.ɵɵadvance(4);\n    i0.ɵɵtextInterpolate1(\" \", i0.ɵɵpipeBind2(40, 14, ctx_r2.selectedActivity.date, \"mediumDate\"), \"\");\n    i0.ɵɵadvance(5);\n    i0.ɵɵtextInterpolate1(\" \", i0.ɵɵpipeBind2(45, 17, ctx_r2.selectedActivity.createdAt, \"mediumDate\"), \"\");\n    i0.ɵɵadvance(6);\n    i0.ɵɵtextInterpolate(ctx_r2.selectedActivity.description);\n    i0.ɵɵadvance(4);\n    i0.ɵɵproperty(\"ngIf\", ctx_r2.selectedActivity == null ? null : ctx_r2.selectedActivity.certificateFile);\n    i0.ɵɵadvance();\n    i0.ɵɵproperty(\"ngIf\", !(ctx_r2.selectedActivity == null ? null : ctx_r2.selectedActivity.certificateFile));\n    i0.ɵɵadvance();\n    i0.ɵɵproperty(\"formGroup\", ctx_r2.reviewForm);\n    i0.ɵɵadvance(16);\n    i0.ɵɵproperty(\"value\", ctx_r2.selectedActivity.points);\n  }\n}\nexport class TeacherDashboardComponent {\n  constructor(authService, activityService, fb) {\n    this.authService = authService;\n    this.activityService = activityService;\n    this.fb = fb;\n    this.currentUser = null;\n    this.pendingActivities = [];\n    this.isLoading = true;\n    this.selectedActivity = null;\n    // Activity stats\n    this.totalPendingRequests = 0;\n    this.totalApprovedRequests = 0;\n    this.totalRejectedRequests = 0;\n    this.reviewForm = this.fb.group({\n      status: ['approved'],\n      feedback: ['']\n    });\n  }\n  ngOnInit() {\n    this.currentUser = this.authService.getCurrentUser();\n    this.loadPendingActivities();\n  }\n  // Helper method to check if student is a User object\n  isUserObject(student) {\n    return typeof student === 'object';\n  }\n  // Helper method to get the correct certificate URL\n  getCertificateUrl(certificateFile) {\n    // Ensure we have a valid certificate file path\n    if (!certificateFile) {\n      console.warn('No certificate file path provided');\n      return '';\n    }\n    console.log('Original certificate path:', certificateFile);\n    // Clean up the path and ensure it points to the correct location\n    let certificatePath = certificateFile;\n    // If the path doesn't include 'certificates', add it\n    if (!certificatePath.includes('certificates/')) {\n      certificatePath = `certificates/${certificatePath}`;\n    }\n    // If the path doesn't include 'uploads', add it\n    if (!certificatePath.startsWith('uploads/')) {\n      certificatePath = `uploads/${certificatePath}`;\n    }\n    const finalUrl = `http://localhost:5000/${certificatePath}`;\n    console.log('Final certificate URL:', finalUrl);\n    return finalUrl;\n  }\n  loadPendingActivities() {\n    this.isLoading = true;\n    this.activityService.getPendingActivities().subscribe({\n      next: response => {\n        if (response && response.data) {\n          // Ensure points are properly set for each activity\n          this.pendingActivities = response.data.map(activity => ({\n            ...activity,\n            points: activity.points || this.calculateActivityPoints(activity)\n          }));\n          // Update stats from the response\n          if (response.stats) {\n            this.totalPendingRequests = response.stats.pending || 0;\n            this.totalApprovedRequests = response.stats.approved || 0;\n            this.totalRejectedRequests = response.stats.rejected || 0;\n          } else {\n            this.calculateStats();\n          }\n        } else {\n          this.pendingActivities = [];\n          this.calculateStats();\n        }\n        this.isLoading = false;\n      },\n      error: error => {\n        console.error('Error loading pending activities:', error);\n        this.isLoading = false;\n        this.pendingActivities = [];\n        this.calculateStats();\n      }\n    });\n  }\n  // Helper method to calculate points based on activity type and level\n  calculateActivityPoints(activity) {\n    const sportsPointsMap = {\n      1: 8,\n      2: 15,\n      3: 25,\n      4: 40,\n      5: 50\n    };\n    switch (activity.activityType) {\n      case 'sports':\n        return activity.level ? sportsPointsMap[activity.level] || 0 : 0;\n      case 'mooc':\n        return 50;\n      case 'workshops':\n        return 6;\n      case 'internships':\n        return 20;\n      default:\n        return 0;\n    }\n  }\n  calculateStats() {\n    // Calculate stats based on actual data\n    this.totalPendingRequests = this.pendingActivities.length;\n    // In a real application, you would fetch these counts from the server\n    // For now, we'll set some placeholder values\n    this.totalApprovedRequests = 5;\n    this.totalRejectedRequests = 2;\n  }\n  selectActivity(activity) {\n    this.selectedActivity = activity;\n    // Set form values\n    this.reviewForm.patchValue({\n      status: 'approved',\n      feedback: ''\n    });\n  }\n  submitReview() {\n    if (!this.selectedActivity || !this.reviewForm.valid) {\n      return;\n    }\n    const reviewData = {\n      status: this.reviewForm.get('status')?.value || 'pending',\n      pointsAwarded: this.selectedActivity.points,\n      feedback: this.reviewForm.get('feedback')?.value || ''\n    };\n    this.activityService.reviewActivity(this.selectedActivity._id, reviewData).subscribe({\n      next: response => {\n        // Update the activity in the list\n        const index = this.pendingActivities.findIndex(a => a._id === this.selectedActivity?._id);\n        if (index !== -1) {\n          this.pendingActivities.splice(index, 1);\n        }\n        // Update stats\n        this.calculateStats();\n        // Close the modal\n        this.selectedActivity = null;\n      },\n      error: error => {\n        console.error('Error submitting review:', error);\n      }\n    });\n  }\n  static {\n    this.ɵfac = function TeacherDashboardComponent_Factory(t) {\n      return new (t || TeacherDashboardComponent)(i0.ɵɵdirectiveInject(i1.AuthService), i0.ɵɵdirectiveInject(i2.ActivityService), i0.ɵɵdirectiveInject(i3.FormBuilder));\n    };\n  }\n  static {\n    this.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n      type: TeacherDashboardComponent,\n      selectors: [[\"app-teacher-dashboard\"]],\n      standalone: true,\n      features: [i0.ɵɵStandaloneFeature],\n      decls: 23,\n      vars: 3,\n      consts: [[1, \"container\", \"py-4\"], [1, \"row\", \"mb-4\"], [1, \"col-12\"], [1, \"d-flex\", \"justify-content-between\", \"align-items-center\"], [1, \"mb-0\"], [\"class\", \"text-center py-5\", 4, \"ngIf\"], [4, \"ngIf\"], [\"id\", \"reviewModal\", \"tabindex\", \"-1\", \"aria-labelledby\", \"reviewModalLabel\", \"aria-hidden\", \"true\", 1, \"modal\", \"fade\"], [1, \"modal-dialog\", \"modal-lg\"], [1, \"modal-content\"], [1, \"modal-header\"], [\"id\", \"reviewModalLabel\", 1, \"modal-title\"], [\"type\", \"button\", \"data-bs-dismiss\", \"modal\", \"aria-label\", \"Close\", 1, \"btn-close\"], [1, \"modal-body\"], [1, \"modal-footer\"], [\"type\", \"button\", \"data-bs-dismiss\", \"modal\", 1, \"btn\", \"btn-secondary\"], [\"type\", \"button\", \"data-bs-dismiss\", \"modal\", 1, \"btn\", \"btn-primary\", 3, \"click\"], [1, \"text-center\", \"py-5\"], [\"role\", \"status\", 1, \"spinner-border\", \"text-primary\"], [1, \"visually-hidden\"], [1, \"mt-2\"], [1, \"col-md-4\", \"mb-3\", \"mb-md-0\"], [1, \"card\", \"h-100\", \"border-0\", \"shadow-sm\"], [1, \"card-body\", \"d-flex\", \"flex-column\", \"align-items-center\"], [1, \"text-warning\", \"mb-0\"], [1, \"text-muted\", \"mb-0\"], [1, \"text-success\", \"mb-0\"], [1, \"col-md-4\"], [1, \"text-danger\", \"mb-0\"], [1, \"card\", \"border-0\", \"shadow-sm\"], [1, \"card-header\", \"bg-white\", \"border-0\"], [1, \"card-body\"], [\"class\", \"text-center py-4\", 4, \"ngIf\"], [\"class\", \"table-responsive\", 4, \"ngIf\"], [1, \"text-center\", \"py-4\"], [1, \"table-responsive\"], [1, \"table\", \"table-hover\"], [4, \"ngFor\", \"ngForOf\"], [1, \"d-flex\", \"flex-column\"], [1, \"fw-medium\"], [1, \"text-muted\"], [\"data-bs-toggle\", \"modal\", \"data-bs-target\", \"#reviewModal\", 1, \"btn\", \"btn-sm\", \"btn-primary\", 3, \"click\"], [1, \"col-md-6\"], [1, \"mb-2\"], [1, \"mb-1\"], [1, \"mb-4\"], [\"class\", \"text-muted\", 4, \"ngIf\"], [3, \"formGroup\"], [1, \"mb-3\"], [1, \"form-label\"], [1, \"d-flex\"], [1, \"form-check\", \"me-3\"], [\"type\", \"radio\", \"formControlName\", \"status\", \"id\", \"statusApprove\", \"value\", \"approved\", 1, \"form-check-input\"], [\"for\", \"statusApprove\", 1, \"form-check-label\"], [1, \"form-check\"], [\"type\", \"radio\", \"formControlName\", \"status\", \"id\", \"statusReject\", \"value\", \"rejected\", 1, \"form-check-input\"], [\"for\", \"statusReject\", 1, \"form-check-label\"], [\"for\", \"pointsAwarded\", 1, \"form-label\"], [\"type\", \"number\", \"id\", \"pointsAwarded\", \"readonly\", \"\", 1, \"form-control\", \"bg-light\", 3, \"value\"], [\"for\", \"feedback\", 1, \"form-label\"], [\"id\", \"feedback\", \"formControlName\", \"feedback\", \"rows\", \"3\", \"placeholder\", \"Provide feedback to the student\", 1, \"form-control\"], [\"target\", \"_blank\", 1, \"btn\", \"btn-primary\", 3, \"href\"], [1, \"bi\", \"bi-file-earmark-pdf\", \"me-2\"], [1, \"d-block\", \"mt-2\", \"text-muted\"]],\n      template: function TeacherDashboardComponent_Template(rf, ctx) {\n        if (rf & 1) {\n          i0.ɵɵelement(0, \"app-navbar\");\n          i0.ɵɵelementStart(1, \"div\", 0)(2, \"div\", 1)(3, \"div\", 2)(4, \"div\", 3)(5, \"h1\", 4);\n          i0.ɵɵtext(6, \"Teacher Dashboard\");\n          i0.ɵɵelementEnd()()()();\n          i0.ɵɵtemplate(7, TeacherDashboardComponent_div_7_Template, 6, 0, \"div\", 5)(8, TeacherDashboardComponent_div_8_Template, 30, 5, \"div\", 6);\n          i0.ɵɵelementEnd();\n          i0.ɵɵelementStart(9, \"div\", 7)(10, \"div\", 8)(11, \"div\", 9)(12, \"div\", 10)(13, \"h5\", 11);\n          i0.ɵɵtext(14, \"Review Certificate\");\n          i0.ɵɵelementEnd();\n          i0.ɵɵelement(15, \"button\", 12);\n          i0.ɵɵelementEnd();\n          i0.ɵɵelementStart(16, \"div\", 13);\n          i0.ɵɵtemplate(17, TeacherDashboardComponent_div_17_Template, 79, 20, \"div\", 6);\n          i0.ɵɵelementEnd();\n          i0.ɵɵelementStart(18, \"div\", 14)(19, \"button\", 15);\n          i0.ɵɵtext(20, \"Close\");\n          i0.ɵɵelementEnd();\n          i0.ɵɵelementStart(21, \"button\", 16);\n          i0.ɵɵlistener(\"click\", function TeacherDashboardComponent_Template_button_click_21_listener() {\n            return ctx.submitReview();\n          });\n          i0.ɵɵtext(22, \"Submit Review\");\n          i0.ɵɵelementEnd()()()()();\n        }\n        if (rf & 2) {\n          i0.ɵɵadvance(7);\n          i0.ɵɵproperty(\"ngIf\", ctx.isLoading);\n          i0.ɵɵadvance();\n          i0.ɵɵproperty(\"ngIf\", !ctx.isLoading);\n          i0.ɵɵadvance(9);\n          i0.ɵɵproperty(\"ngIf\", ctx.selectedActivity);\n        }\n      },\n      dependencies: [CommonModule, i4.NgForOf, i4.NgIf, i4.DatePipe, ReactiveFormsModule, i3.ɵNgNoValidate, i3.DefaultValueAccessor, i3.RadioControlValueAccessor, i3.NgControlStatus, i3.NgControlStatusGroup, i3.FormGroupDirective, i3.FormControlName, NavbarComponent],\n      styles: [\".shadow-sm[_ngcontent-%COMP%] {\\n  box-shadow: 0 0.125rem 0.25rem rgba(0, 0, 0, 0.075) !important;\\n}\\n\\n.card[_ngcontent-%COMP%] {\\n  transition: transform 0.2s ease-in-out;\\n}\\n.card[_ngcontent-%COMP%]:hover {\\n  transform: translateY(-3px);\\n}\\n\\nh3[_ngcontent-%COMP%] {\\n  font-size: 2rem;\\n  font-weight: 600;\\n}\\n\\n.text-muted[_ngcontent-%COMP%] {\\n  font-size: 0.9rem;\\n}\\n\\n.table[_ngcontent-%COMP%] {\\n  font-size: 0.95rem;\\n}\\n.table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%] {\\n  font-weight: 600;\\n  color: #495057;\\n}\\n\\n.card-header[_ngcontent-%COMP%] {\\n  padding: 1rem 1.25rem;\\n}\\n.card-header[_ngcontent-%COMP%]   h5[_ngcontent-%COMP%] {\\n  font-weight: 600;\\n}\\n\\n.fw-medium[_ngcontent-%COMP%] {\\n  font-weight: 500;\\n}\\n\\n.form-input[_ngcontent-%COMP%] {\\n  width: 100%;\\n  padding: 0.75rem 1rem;\\n  border: 1px solid #ced4da;\\n  border-radius: 0.375rem;\\n  font-size: 1rem;\\n  transition: border-color 0.15s ease-in-out, box-shadow 0.15s ease-in-out;\\n}\\n.form-input[_ngcontent-%COMP%]:focus {\\n  outline: none;\\n  border-color: #80bdff;\\n  box-shadow: 0 0 0 0.2rem rgba(0, 123, 255, 0.25);\\n}\\n\\n.certificate-preview[_ngcontent-%COMP%] {\\n  border: 1px solid #ced4da;\\n  border-radius: 0.375rem;\\n  padding: 2rem;\\n  background-color: #f8f9fa;\\n  min-height: 200px;\\n  display: flex;\\n  align-items: center;\\n  justify-content: center;\\n}\\n/*# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8uL3NyYy9hcHAvZmVhdHVyZXMvZGFzaGJvYXJkL3RlYWNoZXItZGFzaGJvYXJkL3RlYWNoZXItZGFzaGJvYXJkLmNvbXBvbmVudC5zY3NzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBO0VBQ0UsOERBQUE7QUFDRjs7QUFFQTtFQUNFLHNDQUFBO0FBQ0Y7QUFDRTtFQUNFLDJCQUFBO0FBQ0o7O0FBR0E7RUFDRSxlQUFBO0VBQ0EsZ0JBQUE7QUFBRjs7QUFHQTtFQUNFLGlCQUFBO0FBQUY7O0FBR0E7RUFDRSxrQkFBQTtBQUFGO0FBRUU7RUFDRSxnQkFBQTtFQUNBLGNBQUE7QUFBSjs7QUFJQTtFQUNFLHFCQUFBO0FBREY7QUFHRTtFQUNFLGdCQUFBO0FBREo7O0FBS0E7RUFDRSxnQkFBQTtBQUZGOztBQUtBO0VBQ0UsV0FBQTtFQUNBLHFCQUFBO0VBQ0EseUJBQUE7RUFDQSx1QkFBQTtFQUNBLGVBQUE7RUFDQSx3RUFBQTtBQUZGO0FBSUU7RUFDRSxhQUFBO0VBQ0EscUJBQUE7RUFDQSxnREFBQTtBQUZKOztBQU1BO0VBQ0UseUJBQUE7RUFDQSx1QkFBQTtFQUNBLGFBQUE7RUFDQSx5QkFBQTtFQUNBLGlCQUFBO0VBQ0EsYUFBQTtFQUNBLG1CQUFBO0VBQ0EsdUJBQUE7QUFIRiIsInNvdXJjZXNDb250ZW50IjpbIi5zaGFkb3ctc20ge1xyXG4gIGJveC1zaGFkb3c6IDAgMC4xMjVyZW0gMC4yNXJlbSByZ2JhKDAsIDAsIDAsIDAuMDc1KSAhaW1wb3J0YW50O1xyXG59XHJcblxyXG4uY2FyZCB7XHJcbiAgdHJhbnNpdGlvbjogdHJhbnNmb3JtIDAuMnMgZWFzZS1pbi1vdXQ7XHJcbiAgXHJcbiAgJjpob3ZlciB7XHJcbiAgICB0cmFuc2Zvcm06IHRyYW5zbGF0ZVkoLTNweCk7XHJcbiAgfVxyXG59XHJcblxyXG5oMyB7XHJcbiAgZm9udC1zaXplOiAycmVtO1xyXG4gIGZvbnQtd2VpZ2h0OiA2MDA7XHJcbn1cclxuXHJcbi50ZXh0LW11dGVkIHtcclxuICBmb250LXNpemU6IDAuOXJlbTtcclxufVxyXG5cclxuLnRhYmxlIHtcclxuICBmb250LXNpemU6IDAuOTVyZW07XHJcbiAgXHJcbiAgdGgge1xyXG4gICAgZm9udC13ZWlnaHQ6IDYwMDtcclxuICAgIGNvbG9yOiAjNDk1MDU3O1xyXG4gIH1cclxufVxyXG5cclxuLmNhcmQtaGVhZGVyIHtcclxuICBwYWRkaW5nOiAxcmVtIDEuMjVyZW07XHJcbiAgXHJcbiAgaDUge1xyXG4gICAgZm9udC13ZWlnaHQ6IDYwMDtcclxuICB9XHJcbn1cclxuXHJcbi5mdy1tZWRpdW0ge1xyXG4gIGZvbnQtd2VpZ2h0OiA1MDA7XHJcbn1cclxuXHJcbi5mb3JtLWlucHV0IHtcclxuICB3aWR0aDogMTAwJTtcclxuICBwYWRkaW5nOiAwLjc1cmVtIDFyZW07XHJcbiAgYm9yZGVyOiAxcHggc29saWQgI2NlZDRkYTtcclxuICBib3JkZXItcmFkaXVzOiAwLjM3NXJlbTtcclxuICBmb250LXNpemU6IDFyZW07XHJcbiAgdHJhbnNpdGlvbjogYm9yZGVyLWNvbG9yIDAuMTVzIGVhc2UtaW4tb3V0LCBib3gtc2hhZG93IDAuMTVzIGVhc2UtaW4tb3V0O1xyXG4gIFxyXG4gICY6Zm9jdXMge1xyXG4gICAgb3V0bGluZTogbm9uZTtcclxuICAgIGJvcmRlci1jb2xvcjogIzgwYmRmZjtcclxuICAgIGJveC1zaGFkb3c6IDAgMCAwIDAuMnJlbSByZ2JhKDAsIDEyMywgMjU1LCAwLjI1KTtcclxuICB9XHJcbn1cclxuXHJcbi5jZXJ0aWZpY2F0ZS1wcmV2aWV3IHtcclxuICBib3JkZXI6IDFweCBzb2xpZCAjY2VkNGRhO1xyXG4gIGJvcmRlci1yYWRpdXM6IDAuMzc1cmVtO1xyXG4gIHBhZGRpbmc6IDJyZW07XHJcbiAgYmFja2dyb3VuZC1jb2xvcjogI2Y4ZjlmYTtcclxuICBtaW4taGVpZ2h0OiAyMDBweDtcclxuICBkaXNwbGF5OiBmbGV4O1xyXG4gIGFsaWduLWl0ZW1zOiBjZW50ZXI7XHJcbiAganVzdGlmeS1jb250ZW50OiBjZW50ZXI7XHJcbn0gIl0sInNvdXJjZVJvb3QiOiIifQ== */\"]\n    });\n  }\n}","map":{"version":3,"names":["CommonModule","ReactiveFormsModule","NavbarComponent","i0","ɵɵelementStart","ɵɵtext","ɵɵelementEnd","ɵɵlistener","TeacherDashboardComponent_div_8_div_29_tr_15_Template_button_click_15_listener","activity_r2","ɵɵrestoreView","_r1","$implicit","ctx_r2","ɵɵnextContext","ɵɵresetView","selectActivity","ɵɵadvance","ɵɵtextInterpolate","isUserObject","student","name","ɵɵtextInterpolate2","rollNumber","class","title","activityType","ɵɵpipeBind2","date","ɵɵtemplate","TeacherDashboardComponent_div_8_div_29_tr_15_Template","ɵɵproperty","pendingActivities","TeacherDashboardComponent_div_8_div_28_Template","TeacherDashboardComponent_div_8_div_29_Template","totalPendingRequests","totalApprovedRequests","totalRejectedRequests","length","ɵɵelement","getCertificateUrl","selectedActivity","certificateFile","ɵɵsanitizeUrl","TeacherDashboardComponent_div_17_div_54_Template","TeacherDashboardComponent_div_17_p_55_Template","ɵɵtextInterpolate1","department","semester","createdAt","description","reviewForm","points","TeacherDashboardComponent","constructor","authService","activityService","fb","currentUser","isLoading","group","status","feedback","ngOnInit","getCurrentUser","loadPendingActivities","console","warn","log","certificatePath","includes","startsWith","finalUrl","getPendingActivities","subscribe","next","response","data","map","activity","calculateActivityPoints","stats","pending","approved","rejected","calculateStats","error","sportsPointsMap","level","patchValue","submitReview","valid","reviewData","get","value","pointsAwarded","reviewActivity","_id","index","findIndex","a","splice","ɵɵdirectiveInject","i1","AuthService","i2","ActivityService","i3","FormBuilder","selectors","standalone","features","ɵɵStandaloneFeature","decls","vars","consts","template","TeacherDashboardComponent_Template","rf","ctx","TeacherDashboardComponent_div_7_Template","TeacherDashboardComponent_div_8_Template","TeacherDashboardComponent_div_17_Template","TeacherDashboardComponent_Template_button_click_21_listener","i4","NgForOf","NgIf","DatePipe","ɵNgNoValidate","DefaultValueAccessor","RadioControlValueAccessor","NgControlStatus","NgControlStatusGroup","FormGroupDirective","FormControlName","styles"],"sources":["C:\\Users\\LENOVO\\OneDrive\\Desktop\\finalminitrack\\ActivityPoints-Tracker-\\frontend\\src\\app\\features\\dashboard\\teacher-dashboard\\teacher-dashboard.component.ts","C:\\Users\\LENOVO\\OneDrive\\Desktop\\finalminitrack\\ActivityPoints-Tracker-\\frontend\\src\\app\\features\\dashboard\\teacher-dashboard\\teacher-dashboard.component.html"],"sourcesContent":["import { Component, OnInit } from '@angular/core';\r\nimport { CommonModule } from '@angular/common';\r\nimport { RouterLink } from '@angular/router';\r\nimport { FormBuilder, FormGroup, ReactiveFormsModule } from '@angular/forms';\r\nimport { AuthService } from '../../../core/services/auth.service';\r\nimport { ActivityService } from '../../../core/services/activity.service';\r\nimport { NavbarComponent } from '../../../ui/navbar/navbar.component';\r\nimport { User } from '../../../core/models/user.model';\r\nimport { Activity } from '../../../core/models/activity.model';\r\nimport { environment } from '../../../../environments/environment';\r\n\r\n@Component({\r\n  selector: 'app-teacher-dashboard',\r\n  standalone: true,\r\n  imports: [CommonModule, RouterLink, ReactiveFormsModule, NavbarComponent],\r\n  templateUrl: './teacher-dashboard.component.html',\r\n  styleUrls: ['./teacher-dashboard.component.scss']\r\n})\r\nexport class TeacherDashboardComponent implements OnInit {\r\n  currentUser: User | null = null;\r\n  pendingActivities: Activity[] = [];\r\n  isLoading: boolean = true;\r\n  selectedActivity: Activity | null = null;\r\n  reviewForm: FormGroup;\r\n  \r\n  // Activity stats\r\n  totalPendingRequests: number = 0;\r\n  totalApprovedRequests: number = 0;\r\n  totalRejectedRequests: number = 0;\r\n  \r\n  constructor(\r\n    private authService: AuthService,\r\n    private activityService: ActivityService,\r\n    private fb: FormBuilder\r\n  ) {\r\n    this.reviewForm = this.fb.group({\r\n      status: ['approved'],\r\n      feedback: ['']\r\n    });\r\n  }\r\n\r\n  ngOnInit(): void {\r\n    this.currentUser = this.authService.getCurrentUser();\r\n    this.loadPendingActivities();\r\n  }\r\n\r\n  // Helper method to check if student is a User object\r\n  isUserObject(student: User | string): student is User {\r\n    return typeof student === 'object';\r\n  }\r\n\r\n  // Helper method to get the correct certificate URL\r\n  getCertificateUrl(certificateFile: string): string {\r\n    // Ensure we have a valid certificate file path\r\n    if (!certificateFile) {\r\n      console.warn('No certificate file path provided');\r\n      return '';\r\n    }\r\n    \r\n    console.log('Original certificate path:', certificateFile);\r\n    \r\n    // Clean up the path and ensure it points to the correct location\r\n    let certificatePath = certificateFile;\r\n    \r\n    // If the path doesn't include 'certificates', add it\r\n    if (!certificatePath.includes('certificates/')) {\r\n      certificatePath = `certificates/${certificatePath}`;\r\n    }\r\n    \r\n    // If the path doesn't include 'uploads', add it\r\n    if (!certificatePath.startsWith('uploads/')) {\r\n      certificatePath = `uploads/${certificatePath}`;\r\n    }\r\n    \r\n    const finalUrl = `http://localhost:5000/${certificatePath}`;\r\n    console.log('Final certificate URL:', finalUrl);\r\n    return finalUrl;\r\n  }\r\n\r\n  loadPendingActivities(): void {\r\n    this.isLoading = true;\r\n    \r\n    this.activityService.getPendingActivities().subscribe({\r\n      next: (response) => {\r\n        if (response && response.data) {\r\n          // Ensure points are properly set for each activity\r\n          this.pendingActivities = response.data.map(activity => ({\r\n            ...activity,\r\n            points: activity.points || this.calculateActivityPoints(activity)\r\n          }));\r\n          \r\n          // Update stats from the response\r\n          if (response.stats) {\r\n            this.totalPendingRequests = response.stats.pending || 0;\r\n            this.totalApprovedRequests = response.stats.approved || 0;\r\n            this.totalRejectedRequests = response.stats.rejected || 0;\r\n          } else {\r\n            this.calculateStats();\r\n          }\r\n        } else {\r\n          this.pendingActivities = [];\r\n          this.calculateStats();\r\n        }\r\n        \r\n        this.isLoading = false;\r\n      },\r\n      error: (error) => {\r\n        console.error('Error loading pending activities:', error);\r\n        this.isLoading = false;\r\n        this.pendingActivities = [];\r\n        this.calculateStats();\r\n      }\r\n    });\r\n  }\r\n\r\n  // Helper method to calculate points based on activity type and level\r\n  private calculateActivityPoints(activity: Activity): number {\r\n    const sportsPointsMap: { [key: number]: number } = {\r\n      1: 8,\r\n      2: 15,\r\n      3: 25,\r\n      4: 40,\r\n      5: 50\r\n    };\r\n\r\n    switch (activity.activityType) {\r\n      case 'sports':\r\n        return activity.level ? sportsPointsMap[activity.level] || 0 : 0;\r\n      case 'mooc':\r\n        return 50;\r\n      case 'workshops':\r\n        return 6;\r\n      case 'internships':\r\n        return 20;\r\n      default:\r\n        return 0;\r\n    }\r\n  }\r\n\r\n  calculateStats(): void {\r\n    // Calculate stats based on actual data\r\n    this.totalPendingRequests = this.pendingActivities.length;\r\n    \r\n    // In a real application, you would fetch these counts from the server\r\n    // For now, we'll set some placeholder values\r\n    this.totalApprovedRequests = 5;\r\n    this.totalRejectedRequests = 2;\r\n  }\r\n\r\n  selectActivity(activity: Activity): void {\r\n    this.selectedActivity = activity;\r\n    \r\n    // Set form values\r\n    this.reviewForm.patchValue({\r\n      status: 'approved',\r\n      feedback: ''\r\n    });\r\n  }\r\n\r\n  submitReview(): void {\r\n    if (!this.selectedActivity || !this.reviewForm.valid) {\r\n      return;\r\n    }\r\n    \r\n    const reviewData = {\r\n      status: this.reviewForm.get('status')?.value || 'pending',\r\n      pointsAwarded: this.selectedActivity.points,  // Use the points from the activity\r\n      feedback: this.reviewForm.get('feedback')?.value || ''\r\n    };\r\n    \r\n    this.activityService.reviewActivity(this.selectedActivity._id, reviewData).subscribe({\r\n      next: (response) => {\r\n        // Update the activity in the list\r\n        const index = this.pendingActivities.findIndex(a => a._id === this.selectedActivity?._id);\r\n        if (index !== -1) {\r\n          this.pendingActivities.splice(index, 1);\r\n        }\r\n        \r\n        // Update stats\r\n        this.calculateStats();\r\n        \r\n        // Close the modal\r\n        this.selectedActivity = null;\r\n      },\r\n      error: (error) => {\r\n        console.error('Error submitting review:', error);\r\n      }\r\n    });\r\n  }\r\n} ","<app-navbar></app-navbar>\r\n\r\n<div class=\"container py-4\">\r\n  <div class=\"row mb-4\">\r\n    <div class=\"col-12\">\r\n      <div class=\"d-flex justify-content-between align-items-center\">\r\n        <h1 class=\"mb-0\">Teacher Dashboard</h1>\r\n      </div>\r\n    </div>\r\n  </div>\r\n\r\n  <!-- Loading Spinner -->\r\n  <div *ngIf=\"isLoading\" class=\"text-center py-5\">\r\n    <div class=\"spinner-border text-primary\" role=\"status\">\r\n      <span class=\"visually-hidden\">Loading...</span>\r\n    </div>\r\n    <p class=\"mt-2\">Loading your dashboard...</p>\r\n  </div>\r\n\r\n  <div *ngIf=\"!isLoading\">\r\n    <!-- Stats Cards -->\r\n    <div class=\"row mb-4\">\r\n      <div class=\"col-md-4 mb-3 mb-md-0\">\r\n        <div class=\"card h-100 border-0 shadow-sm\">\r\n          <div class=\"card-body d-flex flex-column align-items-center\">\r\n            <h3 class=\"text-warning mb-0\">{{ totalPendingRequests }}</h3>\r\n            <p class=\"text-muted mb-0\">Pending Requests</p>\r\n          </div>\r\n        </div>\r\n      </div>\r\n      \r\n      <div class=\"col-md-4 mb-3 mb-md-0\">\r\n        <div class=\"card h-100 border-0 shadow-sm\">\r\n          <div class=\"card-body d-flex flex-column align-items-center\">\r\n            <h3 class=\"text-success mb-0\">{{ totalApprovedRequests }}</h3>\r\n            <p class=\"text-muted mb-0\">Approved Requests</p>\r\n          </div>\r\n        </div>\r\n      </div>\r\n      \r\n      <div class=\"col-md-4\">\r\n        <div class=\"card h-100 border-0 shadow-sm\">\r\n          <div class=\"card-body d-flex flex-column align-items-center\">\r\n            <h3 class=\"text-danger mb-0\">{{ totalRejectedRequests }}</h3>\r\n            <p class=\"text-muted mb-0\">Rejected Requests</p>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n    \r\n    <!-- Pending Activities -->\r\n    <div class=\"card border-0 shadow-sm\">\r\n      <div class=\"card-header bg-white border-0\">\r\n        <h5 class=\"mb-0\">Pending Certificate Requests</h5>\r\n      </div>\r\n      <div class=\"card-body\">\r\n        <div *ngIf=\"pendingActivities.length === 0\" class=\"text-center py-4\">\r\n          <p class=\"text-muted mb-0\">No pending certificate requests.</p>\r\n        </div>\r\n        \r\n        <div *ngIf=\"pendingActivities.length > 0\" class=\"table-responsive\">\r\n          <table class=\"table table-hover\">\r\n            <thead>\r\n              <tr>\r\n                <th>Student</th>\r\n                <th>Title</th>\r\n                <th>Type</th>\r\n                <th>Date</th>\r\n                <th>Actions</th>\r\n              </tr>\r\n            </thead>\r\n            <tbody>\r\n              <tr *ngFor=\"let activity of pendingActivities\">\r\n                <td>\r\n                  <div class=\"d-flex flex-column\">\r\n                    <span class=\"fw-medium\">{{ isUserObject(activity.student) ? activity.student.name : 'Unknown' }}</span>\r\n                    <small class=\"text-muted\">{{ isUserObject(activity.student) ? activity.student.rollNumber : '' }} | {{ isUserObject(activity.student) ? activity.student.class : '' }}</small>\r\n                  </div>\r\n                </td>\r\n                <td>{{ activity.title }}</td>\r\n                <td>{{ activity.activityType }}</td>\r\n                <td>{{ activity.date | date:'mediumDate' }}</td>\r\n                <td>\r\n                  <button class=\"btn btn-sm btn-primary\" (click)=\"selectActivity(activity)\" data-bs-toggle=\"modal\" data-bs-target=\"#reviewModal\">\r\n                    Review\r\n                  </button>\r\n                </td>\r\n              </tr>\r\n            </tbody>\r\n          </table>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  </div>\r\n</div>\r\n\r\n<!-- Review Modal -->\r\n<div class=\"modal fade\" id=\"reviewModal\" tabindex=\"-1\" aria-labelledby=\"reviewModalLabel\" aria-hidden=\"true\">\r\n  <div class=\"modal-dialog modal-lg\">\r\n    <div class=\"modal-content\">\r\n      <div class=\"modal-header\">\r\n        <h5 class=\"modal-title\" id=\"reviewModalLabel\">Review Certificate</h5>\r\n        <button type=\"button\" class=\"btn-close\" data-bs-dismiss=\"modal\" aria-label=\"Close\"></button>\r\n      </div>\r\n      <div class=\"modal-body\">\r\n        <div *ngIf=\"selectedActivity\">\r\n          <div class=\"row mb-4\">\r\n            <div class=\"col-md-6\">\r\n              <h6 class=\"mb-2\">Student Information</h6>\r\n              <p class=\"mb-1\"><strong>Name:</strong> {{ isUserObject(selectedActivity.student) ? selectedActivity.student.name : 'Unknown' }}</p>\r\n              <p class=\"mb-1\"><strong>Roll Number:</strong> {{ isUserObject(selectedActivity.student) ? selectedActivity.student.rollNumber : '' }}</p>\r\n              <p class=\"mb-1\"><strong>Class:</strong> {{ isUserObject(selectedActivity.student) ? selectedActivity.student.class : '' }}</p>\r\n              <p class=\"mb-1\"><strong>Department:</strong> {{ isUserObject(selectedActivity.student) ? selectedActivity.student.department : '' }}</p>\r\n              <p class=\"mb-0\"><strong>Semester:</strong> {{ isUserObject(selectedActivity.student) ? selectedActivity.student.semester : '' }}</p>\r\n            </div>\r\n            <div class=\"col-md-6\">\r\n              <h6 class=\"mb-2\">Certificate Information</h6>\r\n              <p class=\"mb-1\"><strong>Title:</strong> {{ selectedActivity.title }}</p>\r\n              <p class=\"mb-1\"><strong>Type:</strong> {{ selectedActivity.activityType }}</p>\r\n              <p class=\"mb-1\"><strong>Date:</strong> {{ selectedActivity.date | date:'mediumDate' }}</p>\r\n              <p class=\"mb-0\"><strong>Submitted On:</strong> {{ selectedActivity.createdAt | date:'mediumDate' }}</p>\r\n            </div>\r\n          </div>\r\n          \r\n          <div class=\"mb-4\">\r\n            <h6 class=\"mb-2\">Description</h6>\r\n            <p class=\"mb-0\">{{ selectedActivity.description }}</p>\r\n          </div>\r\n          \r\n          <div class=\"mb-4\">\r\n            <h6 class=\"mb-2\">Certificate Preview</h6>\r\n            <div *ngIf=\"selectedActivity?.certificateFile\">\r\n              <a [href]=\"getCertificateUrl(selectedActivity.certificateFile)\" \r\n                 target=\"_blank\" \r\n                 class=\"btn btn-primary\">\r\n                <i class=\"bi bi-file-earmark-pdf me-2\"></i>View Certificate\r\n              </a>\r\n              <small class=\"d-block mt-2 text-muted\">Click to open certificate in a new tab</small>\r\n            </div>\r\n            <p *ngIf=\"!selectedActivity?.certificateFile\" class=\"text-muted\">No certificate available</p>\r\n          </div>\r\n          \r\n          <form [formGroup]=\"reviewForm\">\r\n            <div class=\"mb-3\">\r\n              <label class=\"form-label\">Decision</label>\r\n              <div class=\"d-flex\">\r\n                <div class=\"form-check me-3\">\r\n                  <input class=\"form-check-input\" type=\"radio\" formControlName=\"status\" id=\"statusApprove\" value=\"approved\">\r\n                  <label class=\"form-check-label\" for=\"statusApprove\">\r\n                    Approve\r\n                  </label>\r\n                </div>\r\n                <div class=\"form-check\">\r\n                  <input class=\"form-check-input\" type=\"radio\" formControlName=\"status\" id=\"statusReject\" value=\"rejected\">\r\n                  <label class=\"form-check-label\" for=\"statusReject\">\r\n                    Reject\r\n                  </label>\r\n                </div>\r\n              </div>\r\n            </div>\r\n            \r\n            <div class=\"mb-3\">\r\n              <label for=\"pointsAwarded\" class=\"form-label\">Activity Points</label>\r\n              <input type=\"number\" class=\"form-control bg-light\" id=\"pointsAwarded\" [value]=\"selectedActivity.points\" readonly>\r\n              <small class=\"text-muted\">Points calculated based on activity type and level</small>\r\n            </div>\r\n            \r\n            <div class=\"mb-3\">\r\n              <label for=\"feedback\" class=\"form-label\">Feedback (Optional)</label>\r\n              <textarea class=\"form-control\" id=\"feedback\" formControlName=\"feedback\" rows=\"3\" placeholder=\"Provide feedback to the student\"></textarea>\r\n            </div>\r\n          </form>\r\n        </div>\r\n      </div>\r\n      <div class=\"modal-footer\">\r\n        <button type=\"button\" class=\"btn btn-secondary\" data-bs-dismiss=\"modal\">Close</button>\r\n        <button type=\"button\" class=\"btn btn-primary\" (click)=\"submitReview()\" data-bs-dismiss=\"modal\">Submit Review</button>\r\n      </div>\r\n    </div>\r\n  </div>\r\n</div> "],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}