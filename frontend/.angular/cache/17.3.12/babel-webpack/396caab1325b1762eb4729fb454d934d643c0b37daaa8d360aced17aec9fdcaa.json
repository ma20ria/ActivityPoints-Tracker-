{"ast":null,"code":"import { CommonModule } from '@angular/common';\nimport { RouterLink } from '@angular/router';\nimport { NgChartsModule, BaseChartDirective } from 'ng2-charts';\nimport { Chart, registerables } from 'chart.js';\nimport { NavbarComponent } from '../../../ui/navbar/navbar.component';\nimport { interval } from 'rxjs';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"../../../core/services/auth.service\";\nimport * as i2 from \"../../../core/services/activity.service\";\nimport * as i3 from \"@angular/common\";\nimport * as i4 from \"ng2-charts\";\nconst _c0 = (a0, a1, a2) => ({\n  \"bg-success\": a0,\n  \"bg-warning\": a1,\n  \"bg-danger\": a2\n});\nfunction StudentDashboardComponent_div_9_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 8)(1, \"div\", 9)(2, \"span\", 10);\n    i0.ɵɵtext(3, \"Loading...\");\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(4, \"p\", 11);\n    i0.ɵɵtext(5, \"Loading your dashboard...\");\n    i0.ɵɵelementEnd()();\n  }\n}\nfunction StudentDashboardComponent_div_10_tr_71_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"tr\")(1, \"td\", 36);\n    i0.ɵɵtext(2, \"No activities submitted yet.\");\n    i0.ɵɵelementEnd()();\n  }\n}\nfunction StudentDashboardComponent_div_10_tr_72_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"tr\")(1, \"td\");\n    i0.ɵɵtext(2);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(3, \"td\");\n    i0.ɵɵtext(4);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(5, \"td\");\n    i0.ɵɵtext(6);\n    i0.ɵɵpipe(7, \"date\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(8, \"td\")(9, \"span\", 37);\n    i0.ɵɵtext(10);\n    i0.ɵɵpipe(11, \"titlecase\");\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(12, \"td\");\n    i0.ɵɵtext(13);\n    i0.ɵɵelementEnd()();\n  }\n  if (rf & 2) {\n    const activity_r1 = ctx.$implicit;\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(activity_r1.title);\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(activity_r1.activityType);\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(i0.ɵɵpipeBind2(7, 6, activity_r1.date, \"mediumDate\"));\n    i0.ɵɵadvance(3);\n    i0.ɵɵproperty(\"ngClass\", i0.ɵɵpureFunction3(11, _c0, activity_r1.status === \"approved\", activity_r1.status === \"pending\", activity_r1.status === \"rejected\"));\n    i0.ɵɵadvance();\n    i0.ɵɵtextInterpolate1(\" \", i0.ɵɵpipeBind1(11, 9, activity_r1.status), \" \");\n    i0.ɵɵadvance(3);\n    i0.ɵɵtextInterpolate(activity_r1.pointsAwarded || 0);\n  }\n}\nfunction StudentDashboardComponent_div_10_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\")(1, \"div\", 1)(2, \"div\", 12)(3, \"div\", 13)(4, \"div\", 14)(5, \"h3\", 15);\n    i0.ɵɵtext(6);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(7, \"p\", 16);\n    i0.ɵɵtext(8, \"Total Points\");\n    i0.ɵɵelementEnd()()()();\n    i0.ɵɵelementStart(9, \"div\", 12)(10, \"div\", 13)(11, \"div\", 14)(12, \"h3\", 17);\n    i0.ɵɵtext(13);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(14, \"p\", 16);\n    i0.ɵɵtext(15, \"Total Activities\");\n    i0.ɵɵelementEnd()()()();\n    i0.ɵɵelementStart(16, \"div\", 12)(17, \"div\", 13)(18, \"div\", 14)(19, \"h3\", 18);\n    i0.ɵɵtext(20);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(21, \"p\", 16);\n    i0.ɵɵtext(22, \"Approved\");\n    i0.ɵɵelementEnd()()()();\n    i0.ɵɵelementStart(23, \"div\", 19)(24, \"div\", 13)(25, \"div\", 14)(26, \"h3\", 20);\n    i0.ɵɵtext(27);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(28, \"p\", 16);\n    i0.ɵɵtext(29, \"Pending\");\n    i0.ɵɵelementEnd()()()()();\n    i0.ɵɵelementStart(30, \"div\", 1)(31, \"div\", 21)(32, \"div\", 22)(33, \"div\", 23)(34, \"h5\", 4);\n    i0.ɵɵtext(35, \"Activity Status\");\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(36, \"div\", 24)(37, \"div\", 25);\n    i0.ɵɵelement(38, \"canvas\", 26);\n    i0.ɵɵelementEnd()()()();\n    i0.ɵɵelementStart(39, \"div\", 27)(40, \"div\", 22)(41, \"div\", 23)(42, \"h5\", 4);\n    i0.ɵɵtext(43, \"Points by Semester\");\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(44, \"div\", 24)(45, \"div\", 28);\n    i0.ɵɵelement(46, \"canvas\", 26);\n    i0.ɵɵelementEnd()()()()();\n    i0.ɵɵelementStart(47, \"div\", 29)(48, \"div\", 2)(49, \"div\", 30)(50, \"div\", 31)(51, \"h5\", 4);\n    i0.ɵɵtext(52, \"Recent Activities\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(53, \"a\", 32);\n    i0.ɵɵtext(54, \"View All\");\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(55, \"div\", 24)(56, \"div\", 33)(57, \"table\", 34)(58, \"thead\")(59, \"tr\")(60, \"th\");\n    i0.ɵɵtext(61, \"Title\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(62, \"th\");\n    i0.ɵɵtext(63, \"Type\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(64, \"th\");\n    i0.ɵɵtext(65, \"Date\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(66, \"th\");\n    i0.ɵɵtext(67, \"Status\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(68, \"th\");\n    i0.ɵɵtext(69, \"Points\");\n    i0.ɵɵelementEnd()()();\n    i0.ɵɵelementStart(70, \"tbody\");\n    i0.ɵɵtemplate(71, StudentDashboardComponent_div_10_tr_71_Template, 3, 0, \"tr\", 7)(72, StudentDashboardComponent_div_10_tr_72_Template, 14, 15, \"tr\", 35);\n    i0.ɵɵelementEnd()()()()()()()();\n  }\n  if (rf & 2) {\n    const ctx_r1 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(6);\n    i0.ɵɵtextInterpolate(ctx_r1.totalPoints);\n    i0.ɵɵadvance(7);\n    i0.ɵɵtextInterpolate(ctx_r1.totalActivities);\n    i0.ɵɵadvance(7);\n    i0.ɵɵtextInterpolate(ctx_r1.approvedActivities);\n    i0.ɵɵadvance(7);\n    i0.ɵɵtextInterpolate(ctx_r1.pendingActivities);\n    i0.ɵɵadvance(11);\n    i0.ɵɵproperty(\"data\", ctx_r1.doughnutChartData)(\"options\", ctx_r1.doughnutChartOptions)(\"type\", \"doughnut\");\n    i0.ɵɵadvance(8);\n    i0.ɵɵproperty(\"data\", ctx_r1.barChartData)(\"options\", ctx_r1.barChartOptions)(\"type\", ctx_r1.barChartType);\n    i0.ɵɵadvance(25);\n    i0.ɵɵproperty(\"ngIf\", ctx_r1.activities.length === 0);\n    i0.ɵɵadvance();\n    i0.ɵɵproperty(\"ngForOf\", ctx_r1.activities.slice(0, 5));\n  }\n}\n// Register Chart.js components\nChart.register(...registerables);\nexport class StudentDashboardComponent {\n  constructor(authService, activityService) {\n    this.authService = authService;\n    this.activityService = activityService;\n    this.currentUser = null;\n    this.activities = [];\n    this.isLoading = true;\n    // Activity stats\n    this.totalActivities = 0;\n    this.pendingActivities = 0;\n    this.approvedActivities = 0;\n    this.rejectedActivities = 0;\n    this.totalPoints = 0;\n    this.categoryPoints = 0;\n    // Doughnut chart\n    this.doughnutChartData = {\n      labels: ['Approved', 'Pending', 'Rejected'],\n      datasets: [{\n        data: [0, 0, 0],\n        backgroundColor: ['#28a745', '#ffc107', '#dc3545'],\n        hoverOffset: 4\n      }]\n    };\n    this.doughnutChartOptions = {\n      responsive: true,\n      maintainAspectRatio: true,\n      layout: {\n        padding: 10\n      },\n      plugins: {\n        legend: {\n          display: true,\n          position: 'bottom',\n          labels: {\n            padding: 15,\n            font: {\n              size: 11\n            },\n            boxWidth: 12\n          }\n        }\n      }\n    };\n    // Bar chart for activity types\n    this.barChartType = 'bar';\n    this.barChartData = {\n      labels: ['Semester 1', 'Semester 2', 'Semester 3', 'Semester 4', 'Semester 5', 'Semester 6', 'Semester 7', 'Semester 8'],\n      datasets: [{\n        data: [15, 20, 25, 30, 35, 40, 45, 50],\n        label: 'Points Earned',\n        backgroundColor: '#007bff',\n        borderColor: '#007bff',\n        borderWidth: 1,\n        barThickness: 30,\n        maxBarThickness: 40\n      }]\n    };\n    this.barChartOptions = {\n      responsive: true,\n      maintainAspectRatio: false,\n      scales: {\n        x: {\n          grid: {\n            display: false\n          },\n          ticks: {\n            font: {\n              size: 12\n            }\n          }\n        },\n        y: {\n          beginAtZero: true,\n          ticks: {\n            stepSize: 10,\n            font: {\n              size: 12\n            }\n          },\n          grid: {\n            color: '#f0f0f0'\n          }\n        }\n      },\n      plugins: {\n        legend: {\n          display: false\n        },\n        tooltip: {\n          enabled: true,\n          callbacks: {\n            label: function (context) {\n              return `Points: ${context.raw}`;\n            }\n          }\n        }\n      },\n      animation: {\n        duration: 500\n      }\n    };\n  }\n  ngOnInit() {\n    this.currentUser = this.authService.getCurrentUser();\n    this.loadActivities();\n    // Set up automatic refresh every 30 seconds\n    this.refreshSubscription = interval(30000).subscribe(() => {\n      this.loadActivities();\n    });\n  }\n  ngOnDestroy() {\n    if (this.refreshSubscription) {\n      this.refreshSubscription.unsubscribe();\n    }\n  }\n  loadActivities() {\n    this.isLoading = true;\n    this.activityService.getMyActivities().subscribe({\n      next: response => {\n        if (response && response.data) {\n          this.activities = response.data;\n          console.log('Activities loaded:', this.activities);\n          this.calculateStats();\n          this.updateCharts();\n          // Force another chart update after a short delay\n          setTimeout(() => {\n            this.chart?.update();\n          }, 100);\n        } else {\n          this.activities = [];\n        }\n        this.isLoading = false;\n      },\n      error: error => {\n        console.error('Error loading activities:', error);\n        this.isLoading = false;\n      }\n    });\n  }\n  calculateStats() {\n    this.totalActivities = this.activities.length;\n    this.pendingActivities = this.activities.filter(a => a.status === 'pending').length;\n    this.approvedActivities = this.activities.filter(a => a.status === 'approved').length;\n    this.rejectedActivities = this.activities.filter(a => a.status === 'rejected').length;\n    this.totalPoints = this.activities.filter(activity => activity.status === 'approved').reduce((sum, activity) => sum + (activity.pointsAwarded || 0), 0);\n    this.categoryPoints = this.activities.filter(activity => activity.status === 'approved').reduce((sum, activity) => sum + (activity.pointsAwarded || 0), 0);\n  }\n  updateCharts() {\n    // Update doughnut chart\n    this.doughnutChartData.datasets[0].data = [this.approvedActivities, this.pendingActivities, this.rejectedActivities];\n    // Update bar chart with points by semester\n    const semesters = [1, 2, 3, 4, 5, 6, 7, 8];\n    const pointsBySemester = semesters.map(semester => {\n      const semesterPoints = this.activities.filter(a => a.status === 'approved' && Number(a.semester) === semester).reduce((sum, activity) => sum + (Number(activity.pointsAwarded) || 0), 0);\n      console.log(`Semester ${semester} points:`, semesterPoints);\n      return semesterPoints;\n    });\n    console.log('Points by semester:', pointsBySemester);\n    // Create new dataset with updated data\n    const newDataset = {\n      ...this.barChartData.datasets[0],\n      data: pointsBySemester\n    };\n    // Update chart data with new dataset\n    this.barChartData = {\n      labels: this.barChartData.labels,\n      datasets: [newDataset]\n    };\n    // Force chart update\n    if (this.chart) {\n      this.chart.render();\n      setTimeout(() => {\n        this.chart?.update();\n      }, 100);\n    }\n  }\n  // Helper method to determine semester from activity date\n  getSemesterFromDate(date) {\n    const activityDate = new Date(date);\n    const currentYear = new Date().getFullYear();\n    const activityYear = activityDate.getFullYear();\n    const yearDiff = currentYear - activityYear;\n    // Determine if it's first or second half of the year (semester 1 or 2 within a year)\n    const isSecondHalf = activityDate.getMonth() >= 6; // July onwards is second semester\n    // Calculate semester based on year difference and half of year\n    // Assuming student is currently in 8th semester at most\n    const maxSemesters = 8;\n    const currentSemester = Math.min(maxSemesters, yearDiff * 2 + (isSecondHalf ? 2 : 1));\n    // Return a semester between 1 and 8\n    return Math.max(1, currentSemester);\n  }\n  static {\n    this.ɵfac = function StudentDashboardComponent_Factory(t) {\n      return new (t || StudentDashboardComponent)(i0.ɵɵdirectiveInject(i1.AuthService), i0.ɵɵdirectiveInject(i2.ActivityService));\n    };\n  }\n  static {\n    this.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n      type: StudentDashboardComponent,\n      selectors: [[\"app-student-dashboard\"]],\n      viewQuery: function StudentDashboardComponent_Query(rf, ctx) {\n        if (rf & 1) {\n          i0.ɵɵviewQuery(BaseChartDirective, 5);\n        }\n        if (rf & 2) {\n          let _t;\n          i0.ɵɵqueryRefresh(_t = i0.ɵɵloadQuery()) && (ctx.chart = _t.first);\n        }\n      },\n      standalone: true,\n      features: [i0.ɵɵStandaloneFeature],\n      decls: 11,\n      vars: 2,\n      consts: [[1, \"container\", \"py-4\"], [1, \"row\", \"mb-4\"], [1, \"col-12\"], [1, \"d-flex\", \"justify-content-between\", \"align-items-center\"], [1, \"mb-0\"], [\"routerLink\", \"/activities/submit\", 1, \"btn\", \"btn-primary\"], [\"class\", \"text-center py-5\", 4, \"ngIf\"], [4, \"ngIf\"], [1, \"text-center\", \"py-5\"], [\"role\", \"status\", 1, \"spinner-border\", \"text-primary\"], [1, \"visually-hidden\"], [1, \"mt-2\"], [1, \"col-md-3\", \"mb-3\", \"mb-md-0\"], [1, \"card\", \"h-100\", \"border-0\", \"shadow-sm\"], [1, \"card-body\", \"d-flex\", \"flex-column\", \"align-items-center\"], [1, \"text-primary\", \"mb-0\"], [1, \"text-muted\", \"mb-0\"], [1, \"text-info\", \"mb-0\"], [1, \"text-success\", \"mb-0\"], [1, \"col-md-3\"], [1, \"text-warning\", \"mb-0\"], [1, \"col-md-6\", \"mb-4\", \"mb-md-0\"], [1, \"card\", \"border-0\", \"shadow-sm\", \"h-100\"], [1, \"card-header\", \"bg-white\", \"border-0\"], [1, \"card-body\"], [1, \"chart-container\", \"doughnut-container\"], [\"baseChart\", \"\", 3, \"data\", \"options\", \"type\"], [1, \"col-md-6\"], [1, \"chart-container\", 2, \"position\", \"relative\", \"height\", \"300px\", \"width\", \"100%\"], [1, \"row\"], [1, \"card\", \"border-0\", \"shadow-sm\"], [1, \"card-header\", \"bg-white\", \"border-0\", \"d-flex\", \"justify-content-between\", \"align-items-center\"], [\"routerLink\", \"/activities\", 1, \"btn\", \"btn-sm\", \"btn-outline-primary\"], [1, \"table-responsive\"], [1, \"table\", \"table-hover\"], [4, \"ngFor\", \"ngForOf\"], [\"colspan\", \"5\", 1, \"text-center\", \"py-3\"], [1, \"badge\", 3, \"ngClass\"]],\n      template: function StudentDashboardComponent_Template(rf, ctx) {\n        if (rf & 1) {\n          i0.ɵɵelement(0, \"app-navbar\");\n          i0.ɵɵelementStart(1, \"div\", 0)(2, \"div\", 1)(3, \"div\", 2)(4, \"div\", 3)(5, \"h1\", 4);\n          i0.ɵɵtext(6, \"Student Dashboard\");\n          i0.ɵɵelementEnd();\n          i0.ɵɵelementStart(7, \"a\", 5);\n          i0.ɵɵtext(8, \"Submit New Activity\");\n          i0.ɵɵelementEnd()()()();\n          i0.ɵɵtemplate(9, StudentDashboardComponent_div_9_Template, 6, 0, \"div\", 6)(10, StudentDashboardComponent_div_10_Template, 73, 12, \"div\", 7);\n          i0.ɵɵelementEnd();\n        }\n        if (rf & 2) {\n          i0.ɵɵadvance(9);\n          i0.ɵɵproperty(\"ngIf\", ctx.isLoading);\n          i0.ɵɵadvance();\n          i0.ɵɵproperty(\"ngIf\", !ctx.isLoading);\n        }\n      },\n      dependencies: [CommonModule, i3.NgClass, i3.NgForOf, i3.NgIf, i3.TitleCasePipe, i3.DatePipe, RouterLink, NgChartsModule, i4.BaseChartDirective, NavbarComponent],\n      styles: [\".shadow-sm[_ngcontent-%COMP%] {\\n  box-shadow: 0 0.125rem 0.25rem rgba(0, 0, 0, 0.075) !important;\\n}\\n\\n.card[_ngcontent-%COMP%] {\\n  transition: all 0.3s ease;\\n}\\n.card[_ngcontent-%COMP%]:hover {\\n  transform: translateY(-5px);\\n  box-shadow: 0 0.5rem 1rem rgba(0, 0, 0, 0.15) !important;\\n}\\n\\n.chart-container[_ngcontent-%COMP%] {\\n  position: relative;\\n  margin: auto;\\n  height: 300px;\\n  width: 100%;\\n}\\n.chart-container[_ngcontent-%COMP%]   canvas[_ngcontent-%COMP%] {\\n  width: 100% !important;\\n  height: 100% !important;\\n}\\n\\n.doughnut-container[_ngcontent-%COMP%] {\\n  display: flex;\\n  justify-content: center;\\n  align-items: center;\\n  height: 300px;\\n  padding: 10px;\\n}\\n.doughnut-container[_ngcontent-%COMP%]   canvas[_ngcontent-%COMP%] {\\n  max-width: 300px !important;\\n  max-height: 300px !important;\\n  width: 100% !important;\\n  height: 100% !important;\\n}\\n\\nh3[_ngcontent-%COMP%] {\\n  font-size: 2rem;\\n  font-weight: 600;\\n}\\n\\n.text-muted[_ngcontent-%COMP%] {\\n  font-size: 0.9rem;\\n}\\n\\n.badge[_ngcontent-%COMP%] {\\n  padding: 0.5em 0.75em;\\n  font-weight: 500;\\n}\\n\\n.table[_ngcontent-%COMP%] {\\n  font-size: 0.95rem;\\n}\\n.table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%] {\\n  font-weight: 600;\\n  color: #495057;\\n}\\n\\n.card-header[_ngcontent-%COMP%] {\\n  padding: 1rem 1.25rem;\\n}\\n.card-header[_ngcontent-%COMP%]   h5[_ngcontent-%COMP%] {\\n  font-weight: 600;\\n}\\n\\n@media (max-width: 768px) {\\n  .chart-container[_ngcontent-%COMP%] {\\n    height: 250px;\\n  }\\n  .doughnut-container[_ngcontent-%COMP%] {\\n    height: 250px;\\n    padding: 10px;\\n  }\\n  .doughnut-container[_ngcontent-%COMP%]   canvas[_ngcontent-%COMP%] {\\n    max-width: 250px !important;\\n    max-height: 250px !important;\\n  }\\n}\\n/*# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8uL3NyYy9hcHAvZmVhdHVyZXMvZGFzaGJvYXJkL3N0dWRlbnQtZGFzaGJvYXJkL3N0dWRlbnQtZGFzaGJvYXJkLmNvbXBvbmVudC5zY3NzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBO0VBQ0UsOERBQUE7QUFDRjs7QUFFQTtFQUNFLHlCQUFBO0FBQ0Y7QUFDRTtFQUNFLDJCQUFBO0VBQ0Esd0RBQUE7QUFDSjs7QUFHQTtFQUNFLGtCQUFBO0VBQ0EsWUFBQTtFQUNBLGFBQUE7RUFDQSxXQUFBO0FBQUY7QUFDRTtFQUNFLHNCQUFBO0VBQ0EsdUJBQUE7QUFDSjs7QUFHQTtFQUNFLGFBQUE7RUFDQSx1QkFBQTtFQUNBLG1CQUFBO0VBQ0EsYUFBQTtFQUNBLGFBQUE7QUFBRjtBQUVFO0VBQ0UsMkJBQUE7RUFDQSw0QkFBQTtFQUNBLHNCQUFBO0VBQ0EsdUJBQUE7QUFBSjs7QUFJQTtFQUNFLGVBQUE7RUFDQSxnQkFBQTtBQURGOztBQUlBO0VBQ0UsaUJBQUE7QUFERjs7QUFJQTtFQUNFLHFCQUFBO0VBQ0EsZ0JBQUE7QUFERjs7QUFJQTtFQUNFLGtCQUFBO0FBREY7QUFHRTtFQUNFLGdCQUFBO0VBQ0EsY0FBQTtBQURKOztBQUtBO0VBQ0UscUJBQUE7QUFGRjtBQUlFO0VBQ0UsZ0JBQUE7QUFGSjs7QUFPQTtFQUNFO0lBQ0UsYUFBQTtFQUpGO0VBT0E7SUFDRSxhQUFBO0lBQ0EsYUFBQTtFQUxGO0VBT0U7SUFDRSwyQkFBQTtJQUNBLDRCQUFBO0VBTEo7QUFDRiIsInNvdXJjZXNDb250ZW50IjpbIi5zaGFkb3ctc20ge1xuICBib3gtc2hhZG93OiAwIDAuMTI1cmVtIDAuMjVyZW0gcmdiYSgwLCAwLCAwLCAwLjA3NSkgIWltcG9ydGFudDtcbn1cblxuLmNhcmQge1xuICB0cmFuc2l0aW9uOiBhbGwgMC4zcyBlYXNlO1xuICBcbiAgJjpob3ZlciB7XG4gICAgdHJhbnNmb3JtOiB0cmFuc2xhdGVZKC01cHgpO1xuICAgIGJveC1zaGFkb3c6IDAgMC41cmVtIDFyZW0gcmdiYSgwLCAwLCAwLCAwLjE1KSAhaW1wb3J0YW50O1xuICB9XG59XG5cbi5jaGFydC1jb250YWluZXIge1xuICBwb3NpdGlvbjogcmVsYXRpdmU7XG4gIG1hcmdpbjogYXV0bztcbiAgaGVpZ2h0OiAzMDBweDtcbiAgd2lkdGg6IDEwMCU7XG4gIGNhbnZhcyB7XG4gICAgd2lkdGg6IDEwMCUgIWltcG9ydGFudDtcbiAgICBoZWlnaHQ6IDEwMCUgIWltcG9ydGFudDtcbiAgfVxufVxuXG4uZG91Z2hudXQtY29udGFpbmVyIHtcbiAgZGlzcGxheTogZmxleDtcbiAganVzdGlmeS1jb250ZW50OiBjZW50ZXI7XG4gIGFsaWduLWl0ZW1zOiBjZW50ZXI7XG4gIGhlaWdodDogMzAwcHg7XG4gIHBhZGRpbmc6IDEwcHg7XG4gIFxuICBjYW52YXMge1xuICAgIG1heC13aWR0aDogMzAwcHggIWltcG9ydGFudDtcbiAgICBtYXgtaGVpZ2h0OiAzMDBweCAhaW1wb3J0YW50O1xuICAgIHdpZHRoOiAxMDAlICFpbXBvcnRhbnQ7XG4gICAgaGVpZ2h0OiAxMDAlICFpbXBvcnRhbnQ7XG4gIH1cbn1cblxuaDMge1xuICBmb250LXNpemU6IDJyZW07XG4gIGZvbnQtd2VpZ2h0OiA2MDA7XG59XG5cbi50ZXh0LW11dGVkIHtcbiAgZm9udC1zaXplOiAwLjlyZW07XG59XG5cbi5iYWRnZSB7XG4gIHBhZGRpbmc6IDAuNWVtIDAuNzVlbTtcbiAgZm9udC13ZWlnaHQ6IDUwMDtcbn1cblxuLnRhYmxlIHtcbiAgZm9udC1zaXplOiAwLjk1cmVtO1xuICBcbiAgdGgge1xuICAgIGZvbnQtd2VpZ2h0OiA2MDA7XG4gICAgY29sb3I6ICM0OTUwNTc7XG4gIH1cbn1cblxuLmNhcmQtaGVhZGVyIHtcbiAgcGFkZGluZzogMXJlbSAxLjI1cmVtO1xuICBcbiAgaDUge1xuICAgIGZvbnQtd2VpZ2h0OiA2MDA7XG4gIH1cbn1cblxuLy8gUmVzcG9uc2l2ZSBhZGp1c3RtZW50c1xuQG1lZGlhIChtYXgtd2lkdGg6IDc2OHB4KSB7XG4gIC5jaGFydC1jb250YWluZXIge1xuICAgIGhlaWdodDogMjUwcHg7XG4gIH1cbiAgXG4gIC5kb3VnaG51dC1jb250YWluZXIge1xuICAgIGhlaWdodDogMjUwcHg7XG4gICAgcGFkZGluZzogMTBweDtcbiAgICBcbiAgICBjYW52YXMge1xuICAgICAgbWF4LXdpZHRoOiAyNTBweCAhaW1wb3J0YW50O1xuICAgICAgbWF4LWhlaWdodDogMjUwcHggIWltcG9ydGFudDtcbiAgICB9XG4gIH1cbn0gIl0sInNvdXJjZVJvb3QiOiIifQ== */\"]\n    });\n  }\n}","map":{"version":3,"names":["CommonModule","RouterLink","NgChartsModule","BaseChartDirective","Chart","registerables","NavbarComponent","interval","i0","ɵɵelementStart","ɵɵtext","ɵɵelementEnd","ɵɵadvance","ɵɵtextInterpolate","activity_r1","title","activityType","ɵɵpipeBind2","date","ɵɵproperty","ɵɵpureFunction3","_c0","status","ɵɵtextInterpolate1","ɵɵpipeBind1","pointsAwarded","ɵɵelement","ɵɵtemplate","StudentDashboardComponent_div_10_tr_71_Template","StudentDashboardComponent_div_10_tr_72_Template","ctx_r1","totalPoints","totalActivities","approvedActivities","pendingActivities","doughnutChartData","doughnutChartOptions","barChartData","barChartOptions","barChartType","activities","length","slice","register","StudentDashboardComponent","constructor","authService","activityService","currentUser","isLoading","rejectedActivities","categoryPoints","labels","datasets","data","backgroundColor","hoverOffset","responsive","maintainAspectRatio","layout","padding","plugins","legend","display","position","font","size","boxWidth","label","borderColor","borderWidth","barThickness","maxBarThickness","scales","x","grid","ticks","y","beginAtZero","stepSize","color","tooltip","enabled","callbacks","context","raw","animation","duration","ngOnInit","getCurrentUser","loadActivities","refreshSubscription","subscribe","ngOnDestroy","unsubscribe","getMyActivities","next","response","console","log","calculateStats","updateCharts","setTimeout","chart","update","error","filter","a","activity","reduce","sum","semesters","pointsBySemester","map","semester","semesterPoints","Number","newDataset","render","getSemesterFromDate","activityDate","Date","currentYear","getFullYear","activityYear","yearDiff","isSecondHalf","getMonth","maxSemesters","currentSemester","Math","min","max","ɵɵdirectiveInject","i1","AuthService","i2","ActivityService","selectors","viewQuery","StudentDashboardComponent_Query","rf","ctx","StudentDashboardComponent_div_9_Template","StudentDashboardComponent_div_10_Template","i3","NgClass","NgForOf","NgIf","TitleCasePipe","DatePipe","i4","styles"],"sources":["C:\\Users\\user\\ActivityPoints-Tracker-\\frontend\\src\\app\\features\\dashboard\\student-dashboard\\student-dashboard.component.ts","C:\\Users\\user\\ActivityPoints-Tracker-\\frontend\\src\\app\\features\\dashboard\\student-dashboard\\student-dashboard.component.html"],"sourcesContent":["import { Component, OnInit, OnDestroy, ViewChild } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { RouterLink } from '@angular/router';\nimport { NgChartsModule, BaseChartDirective } from 'ng2-charts';\nimport { ChartConfiguration, ChartData, ChartType } from 'chart.js';\nimport { Chart, registerables } from 'chart.js';\nimport { AuthService } from '../../../core/services/auth.service';\nimport { ActivityService } from '../../../core/services/activity.service';\nimport { NavbarComponent } from '../../../ui/navbar/navbar.component';\nimport { User } from '../../../core/models/user.model';\nimport { Activity } from '../../../core/models/activity.model';\nimport { interval, Subscription } from 'rxjs';\n\n// Register Chart.js components\nChart.register(...registerables);\n\n@Component({\n  selector: 'app-student-dashboard',\n  standalone: true,\n  imports: [CommonModule, RouterLink, NgChartsModule, NavbarComponent],\n  templateUrl: './student-dashboard.component.html',\n  styleUrls: ['./student-dashboard.component.scss']\n})\nexport class StudentDashboardComponent implements OnInit, OnDestroy {\n  @ViewChild(BaseChartDirective) chart?: BaseChartDirective;\n  \n  currentUser: User | null = null;\n  activities: Activity[] = [];\n  isLoading: boolean = true;\n  private refreshSubscription?: Subscription;\n  \n  // Activity stats\n  totalActivities: number = 0;\n  pendingActivities: number = 0;\n  approvedActivities: number = 0;\n  rejectedActivities: number = 0;\n  totalPoints: number = 0;\n  categoryPoints: number = 0;\n  \n  // Doughnut chart\n  public doughnutChartData: ChartData<'doughnut'> = {\n    labels: ['Approved', 'Pending', 'Rejected'],\n    datasets: [\n      {\n        data: [0, 0, 0],\n        backgroundColor: ['#28a745', '#ffc107', '#dc3545'],\n        hoverOffset: 4\n      }\n    ]\n  };\n  \n  public doughnutChartOptions: ChartConfiguration['options'] = {\n    responsive: true,\n    maintainAspectRatio: true,\n    layout: {\n      padding: 10\n    },\n    plugins: {\n      legend: {\n        display: true,\n        position: 'bottom',\n        labels: {\n          padding: 15,\n          font: {\n            size: 11\n          },\n          boxWidth: 12\n        }\n      }\n    }\n  };\n  \n  // Bar chart for activity types\n  public barChartType: ChartType = 'bar';\n  public barChartData: ChartData<'bar'> = {\n    labels: ['Semester 1', 'Semester 2', 'Semester 3', 'Semester 4', 'Semester 5', 'Semester 6', 'Semester 7', 'Semester 8'],\n    datasets: [\n      {\n        data: [15, 20, 25, 30, 35, 40, 45, 50],\n        label: 'Points Earned',\n        backgroundColor: '#007bff',\n        borderColor: '#007bff',\n        borderWidth: 1,\n        barThickness: 30,\n        maxBarThickness: 40\n      }\n    ]\n  };\n  \n  public barChartOptions: ChartConfiguration['options'] = {\n    responsive: true,\n    maintainAspectRatio: false,\n    scales: {\n      x: {\n        grid: {\n          display: false\n        },\n        ticks: {\n          font: {\n            size: 12\n          }\n        }\n      },\n      y: {\n        beginAtZero: true,\n        ticks: {\n          stepSize: 10,\n          font: {\n            size: 12\n          }\n        },\n        grid: {\n          color: '#f0f0f0'\n        }\n      }\n    },\n    plugins: {\n      legend: {\n        display: false\n      },\n      tooltip: {\n        enabled: true,\n        callbacks: {\n          label: function(context) {\n            return `Points: ${context.raw}`;\n          }\n        }\n      }\n    },\n    animation: {\n      duration: 500\n    }\n  };\n\n  constructor(\n    private authService: AuthService,\n    private activityService: ActivityService\n  ) {}\n\n  ngOnInit(): void {\n    this.currentUser = this.authService.getCurrentUser();\n    this.loadActivities();\n    \n    // Set up automatic refresh every 30 seconds\n    this.refreshSubscription = interval(30000).subscribe(() => {\n      this.loadActivities();\n    });\n  }\n\n  ngOnDestroy(): void {\n    if (this.refreshSubscription) {\n      this.refreshSubscription.unsubscribe();\n    }\n  }\n\n  loadActivities(): void {\n    this.isLoading = true;\n    \n    this.activityService.getMyActivities().subscribe({\n      next: (response) => {\n        if (response && response.data) {\n          this.activities = response.data;\n          console.log('Activities loaded:', this.activities);\n          this.calculateStats();\n          this.updateCharts();\n          \n          // Force another chart update after a short delay\n          setTimeout(() => {\n            this.chart?.update();\n          }, 100);\n        } else {\n          this.activities = [];\n        }\n        this.isLoading = false;\n      },\n      error: (error) => {\n        console.error('Error loading activities:', error);\n        this.isLoading = false;\n      }\n    });\n  }\n\n  calculateStats(): void {\n    this.totalActivities = this.activities.length;\n    this.pendingActivities = this.activities.filter(a => a.status === 'pending').length;\n    this.approvedActivities = this.activities.filter(a => a.status === 'approved').length;\n    this.rejectedActivities = this.activities.filter(a => a.status === 'rejected').length;\n    \n    this.totalPoints = this.activities\n      .filter(activity => activity.status === 'approved')\n      .reduce((sum, activity) => sum + (activity.pointsAwarded || 0), 0);\n\n    this.categoryPoints = this.activities\n      .filter(activity => activity.status === 'approved')\n      .reduce((sum, activity) => sum + (activity.pointsAwarded || 0), 0);\n  }\n\n  updateCharts(): void {\n    // Update doughnut chart\n    this.doughnutChartData.datasets[0].data = [\n      this.approvedActivities,\n      this.pendingActivities,\n      this.rejectedActivities\n    ];\n    \n    // Update bar chart with points by semester\n    const semesters = [1, 2, 3, 4, 5, 6, 7, 8];\n    const pointsBySemester = semesters.map(semester => {\n      const semesterPoints = this.activities\n        .filter(a => a.status === 'approved' && Number(a.semester) === semester)\n        .reduce((sum, activity) => sum + (Number(activity.pointsAwarded) || 0), 0);\n      console.log(`Semester ${semester} points:`, semesterPoints);\n      return semesterPoints;\n    });\n    \n    console.log('Points by semester:', pointsBySemester);\n    \n    // Create new dataset with updated data\n    const newDataset = {\n      ...this.barChartData.datasets[0],\n      data: pointsBySemester\n    };\n\n    // Update chart data with new dataset\n    this.barChartData = {\n      labels: this.barChartData.labels,\n      datasets: [newDataset]\n    };\n\n    // Force chart update\n    if (this.chart) {\n      this.chart.render();\n      setTimeout(() => {\n        this.chart?.update();\n      }, 100);\n    }\n  }\n  \n  // Helper method to determine semester from activity date\n  getSemesterFromDate(date: Date | string): number {\n    const activityDate = new Date(date);\n    const currentYear = new Date().getFullYear();\n    const activityYear = activityDate.getFullYear();\n    const yearDiff = currentYear - activityYear;\n    \n    // Determine if it's first or second half of the year (semester 1 or 2 within a year)\n    const isSecondHalf = activityDate.getMonth() >= 6; // July onwards is second semester\n    \n    // Calculate semester based on year difference and half of year\n    // Assuming student is currently in 8th semester at most\n    const maxSemesters = 8;\n    const currentSemester = Math.min(maxSemesters, (yearDiff * 2) + (isSecondHalf ? 2 : 1));\n    \n    // Return a semester between 1 and 8\n    return Math.max(1, currentSemester);\n  }\n} ","<app-navbar></app-navbar>\n\n<div class=\"container py-4\">\n  <div class=\"row mb-4\">\n    <div class=\"col-12\">\n      <div class=\"d-flex justify-content-between align-items-center\">\n        <h1 class=\"mb-0\">Student Dashboard</h1>\n        <a routerLink=\"/activities/submit\" class=\"btn btn-primary\">Submit New Activity</a>\n      </div>\n    </div>\n  </div>\n\n  <!-- Loading Spinner -->\n  <div *ngIf=\"isLoading\" class=\"text-center py-5\">\n    <div class=\"spinner-border text-primary\" role=\"status\">\n      <span class=\"visually-hidden\">Loading...</span>\n    </div>\n    <p class=\"mt-2\">Loading your dashboard...</p>\n  </div>\n\n  <div *ngIf=\"!isLoading\">\n    <!-- Stats Cards -->\n    <div class=\"row mb-4\">\n      <div class=\"col-md-3 mb-3 mb-md-0\">\n        <div class=\"card h-100 border-0 shadow-sm\">\n          <div class=\"card-body d-flex flex-column align-items-center\">\n            <h3 class=\"text-primary mb-0\">{{ totalPoints }}</h3>\n            <p class=\"text-muted mb-0\">Total Points</p>\n          </div>\n        </div>\n      </div>\n      \n      <div class=\"col-md-3 mb-3 mb-md-0\">\n        <div class=\"card h-100 border-0 shadow-sm\">\n          <div class=\"card-body d-flex flex-column align-items-center\">\n            <h3 class=\"text-info mb-0\">{{ totalActivities }}</h3>\n            <p class=\"text-muted mb-0\">Total Activities</p>\n          </div>\n        </div>\n      </div>\n      \n      <div class=\"col-md-3 mb-3 mb-md-0\">\n        <div class=\"card h-100 border-0 shadow-sm\">\n          <div class=\"card-body d-flex flex-column align-items-center\">\n            <h3 class=\"text-success mb-0\">{{ approvedActivities }}</h3>\n            <p class=\"text-muted mb-0\">Approved</p>\n          </div>\n        </div>\n      </div>\n      \n      <div class=\"col-md-3\">\n        <div class=\"card h-100 border-0 shadow-sm\">\n          <div class=\"card-body d-flex flex-column align-items-center\">\n            <h3 class=\"text-warning mb-0\">{{ pendingActivities }}</h3>\n            <p class=\"text-muted mb-0\">Pending</p>\n          </div>\n        </div>\n      </div>\n    </div>\n    \n    <!-- Charts -->\n    <div class=\"row mb-4\">\n      <div class=\"col-md-6 mb-4 mb-md-0\">\n        <div class=\"card border-0 shadow-sm h-100\">\n          <div class=\"card-header bg-white border-0\">\n            <h5 class=\"mb-0\">Activity Status</h5>\n          </div>\n          <div class=\"card-body\">\n            <div class=\"chart-container doughnut-container\">\n              <canvas baseChart\n                [data]=\"doughnutChartData\"\n                [options]=\"doughnutChartOptions\"\n                [type]=\"'doughnut'\">\n              </canvas>\n            </div>\n          </div>\n        </div>\n      </div>\n      \n      <div class=\"col-md-6\">\n        <div class=\"card border-0 shadow-sm h-100\">\n          <div class=\"card-header bg-white border-0\">\n            <h5 class=\"mb-0\">Points by Semester</h5>\n          </div>\n          <div class=\"card-body\">\n            <div class=\"chart-container\" style=\"position: relative; height: 300px; width: 100%;\">\n              <canvas baseChart\n                [data]=\"barChartData\"\n                [options]=\"barChartOptions\"\n                [type]=\"barChartType\">\n              </canvas>\n            </div>\n          </div>\n        </div>\n      </div>\n    </div>\n    \n    <!-- Recent Activities -->\n    <div class=\"row\">\n      <div class=\"col-12\">\n        <div class=\"card border-0 shadow-sm\">\n          <div class=\"card-header bg-white border-0 d-flex justify-content-between align-items-center\">\n            <h5 class=\"mb-0\">Recent Activities</h5>\n            <a routerLink=\"/activities\" class=\"btn btn-sm btn-outline-primary\">View All</a>\n          </div>\n          <div class=\"card-body\">\n            <div class=\"table-responsive\">\n              <table class=\"table table-hover\">\n                <thead>\n                  <tr>\n                    <th>Title</th>\n                    <th>Type</th>\n                    <th>Date</th>\n                    <th>Status</th>\n                    <th>Points</th>\n                  </tr>\n                </thead>\n                <tbody>\n                  <tr *ngIf=\"activities.length === 0\">\n                    <td colspan=\"5\" class=\"text-center py-3\">No activities submitted yet.</td>\n                  </tr>\n                  <tr *ngFor=\"let activity of activities.slice(0, 5)\">\n                    <td>{{ activity.title }}</td>\n                    <td>{{ activity.activityType }}</td>\n                    <td>{{ activity.date | date:'mediumDate' }}</td>\n                    <td>\n                      <span class=\"badge\" [ngClass]=\"{\n                        'bg-success': activity.status === 'approved',\n                        'bg-warning': activity.status === 'pending',\n                        'bg-danger': activity.status === 'rejected'\n                      }\">\n                        {{ activity.status | titlecase }}\n                      </span>\n                    </td>\n                    <td>{{ activity.pointsAwarded || 0 }}</td>\n                  </tr>\n                </tbody>\n              </table>\n            </div>\n          </div>\n        </div>\n      </div>\n    </div>\n  </div>\n</div> "],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}